(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{2128:function(e,t,n){"use strict";n.r(t),function(e){var o=n(2),r=n(0),a=n.n(r),c=n(13),i=n.n(c),u=n(4),s=n(41),l=n(12),f=n.n(l),p=n(7),h=n.n(p),d=n(1241),y=n(67),b=n(98),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var _=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return i()(t),t.state={loading:!0,ready:!1,shouldShowAccountInfoSwitcher:!1,shouldCreateAccount:!1,shouldOpenAccountCreation:!1,createAccountProps:{defaultTradingPlatform:o.ACCOUNT_TRADING_TYPE.QUANT_RANKS,defaultCurrency:e.userCurrency}},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),m(n,[{key:"componentDidMount",value:function(){f.a.isTradingToolEnabled(o.TRADING_TOOLS.PORTFOLIO)?this.serviceEnabled():this.serviceDisabled()}},{key:"isQuantRanksAccountCreated",value:function(){return e.findWhere(this.props.allAccounts,{tradingAccountInstrumentType:o.ACCOUNT_TRADING_TYPE.QUANT_RANKS})}},{key:"serviceEnabled",value:function(){if(this.props.userInstrumentType===o.ACCOUNT_TRADING_TYPE.QUANT_RANKS)return this.navigateToPortfolio();this.setState({loading:!1,ready:!0}),this.isQuantRanksAccountCreated()?this.setState({shouldShowAccountInfoSwitcher:!0}):this.setState({shouldCreateAccount:!0})}},{key:"serviceDisabled",value:function(){h.a.navigate("/")}},{key:"createAccount",value:function(){this.setState({shouldOpenAccountCreation:!0})}},{key:"onSuccess",value:function(){}},{key:"navigateToPortfolio",value:function(t){var n=e.findWhere(t||this.props.allAccounts,{tradingAccountInstrumentType:o.ACCOUNT_TRADING_TYPE.QUANT_RANKS,tradingAccountType:f.a.getPlatformTypeId()});if(n){var r=n.platformAccountId,a=f.a.getPlatformType().toLowerCase();h.a.trigger("platform:switch:account",a,r)}}},{key:"onCreateAccount",value:function(e){this.navigateToPortfolio(e)}},{key:"onCloseCreateAccount",value:function(){this.setState({shouldOpenAccountCreation:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.ready,c=t.shouldOpenAccountCreation,i=t.shouldShowAccountInfoSwitcher,s=t.shouldCreateAccount,l=t.createAccountProps;return n||!r?a.a.createElement(y.a,null):a.a.createElement("div",null,i&&a.a.createElement("div",null,a.a.createElement("button",{className:"btn btn-primary btn-action",onClick:function(){return e.navigateToPortfolio()}},__("invest.open.account"))),s&&a.a.createElement("button",{className:"btn btn-primary btn-action",onClick:this.createAccount},__("invest.build.portfolio")),c&&a.a.createElement(u.Provider,{store:window.store},a.a.createElement(b.b,null,a.a.createElement(d.default,{selectedTab:o.CREATE_ACCOUNT_TAB,onClose:this.onCloseCreateAccount,onCreateAccount:this.onCreateAccount,createAccountProps:l}))))}}]),n}(a.a.Component);t.default=Object(u.connect)((function(e){return{userInstrumentType:Object(s.getUserInstrumentType)(e),allAccounts:Object(s.getUserTradingAccounts)(e),userCurrency:Object(s.getUserCurrency)(e)}}))(_)}.call(this,n(1))},2291:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var o="quant_architect",r="dma_exchange"},2464:function(e,t,n){},2576:function(e,t,n){"use strict";var o=n(0),r=n.n(o),a=n(1),c=n.n(a),i=n(4),u=n(15),s=n(80),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"render",value:function(){var e=this.props.service;return r.a.createElement("div",{className:"pane pane__column pane--center"},r.a.createElement(s.default,{name:e,width:65,height:62}),r.a.createElement("div",{className:"text-primary text-uppercase service-title"},__("invest."+e)))}}]),t}(o.PureComponent),p=n(2291),h=n(2128),d=n(64),y=n.n(d),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),b(t,[{key:"render",value:function(){var e=this.props.service;return r.a.createElement("div",{className:"service-description"},r.a.createElement("div",{className:"text-block"},r.a.createElement("div",null,y()(__("invest."+e+".description")))),e===p.b&&r.a.createElement(h.default,null),e===p.a&&r.a.createElement("a",{href:"#",className:"btn btn-primary btn-action disabled"},__("coming_soon")))}}]),t}(o.PureComponent),_=n(2),v=n(67),O=n(261),E=n(92),P=n(50),w=n(13),C=n.n(w),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var S=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={status:_.IN_PROCESS},C()(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),g(t,[{key:"tryAgain",value:function(e){e.preventDefault(),this.setState({status:_.IN_PROCESS}),c.a.delay(c.a.callIf(this.load,this.mounted),300)}},{key:"componentDidMount",value:function(){this._mounted=!0,this.load()}},{key:"load",value:function(){this.setState({status:_.IN_PROCESS}),this.props.loadPerformance().then(c.a.callIf(this.onSuccess,this.mounted)).catch(c.a.callIf(this.onError,this.mounted))}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"onSuccess",value:function(e){e?(this.setState({status:_.SUCCESS,loadedPerformance:e}),this.props.onSuccess(e)):this.setState({status:_.ERROR})}},{key:"onError",value:function(){this.setState({status:_.ERROR})}},{key:"mounted",value:function(){return this._mounted}},{key:"render",value:function(){var e=this.props,t=e.onErrorCancel,n=e.onErrorOK,o=e.onErrorClose;return this.state.status===_.ERROR?r.a.createElement(E.a,{title:__("errors.title"),message:__("server.request.generic.error.body",__("funded.client.contact_us.link")),textOK:__("actions.try_again"),onOK:n===c.a.noop?this.tryAgain:n,onCancel:t,onClose:o}):null}}]),t}(o.PureComponent);S.defaultProps={onSuccess:c.a.noop,onErrorCancel:c.a.noop,onErrorOK:c.a.noop,onErrorClose:c.a.noop};var T=Object(i.connect)(null,(function(e,t){var n=t.portfolioProviderId;return{loadPerformance:function(){return e(Object(P.k)(n))}}}))(S),A=n(191),j=(n(596),n(920),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}());var k=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={shouldRunPerformanceLoader:!0,statusOfPerformanceLoader:_.EMPTY,portfolio:{}},C()(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),j(t,[{key:"onPerformanceLoaderSuccess",value:function(e){this.setState({loadedPerformance:e,shouldRunPerformanceLoader:!1,statusOfPerformanceLoader:_.SUCCESS})}},{key:"onPerformanceLoaderError",value:function(){this.setState({shouldRunPerformanceLoader:!1,statusOfPerformanceLoader:_.ERROR})}},{key:"componentWillMount",value:function(){c.a.size(this.props.portfolios)>=1&&this.setState({portfolio:this.props.portfolios[0]})}},{key:"onChangePortfolio",value:function(e){this.setState({portfolio:e,shouldRunPerformanceLoader:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.shouldRunPerformanceLoader,o=t.statusOfPerformanceLoader,a=t.loadedPerformance,i=t.portfolio,u=this.props,s=u.portfolios,l=u.onErrorCancel,f=u.onErrorClose,p=u.universeTypes,d=a||{},y=d.backtestRequest,b=d.backtestPerformance,m=y&&c.a.findWhere(p,{value:y.universeTypeID});return r.a.createElement("div",{className:"pane pane__column quant-architect-portfolio"},r.a.createElement(A.default,{getOptionLabel:function(e){return e.portfolioName},getOptionValue:function(e){return e.portfolioID},onChange:function(t){return e.onChangePortfolio(t)},options:s,defaultValue:i}),n&&r.a.createElement(v.a,{position:"absolute",fit:!0}),n&&r.a.createElement(T,{portfolioProviderId:i.portfolioProviderId,onSuccess:this.onPerformanceLoaderSuccess,onErro:this.onPerformanceLoaderError,onErrorClose:f,onErrorCancel:l}),r.a.createElement("div",{className:"portfolio__wrapper"},o===_.SUCCESS&&r.a.createElement("div",{className:"pane pane__fluid pane__column portfolio__performance"},r.a.createElement("div",{className:"pane pane__fluid pane__row portfolio__performance-row"},r.a.createElement("div",{className:"pane pane__fluid portfolio__performance-row-item"},r.a.createElement(O.a,{compact:!0,invest:!0,universeName:m&&__(m.label),dailyReturnData:b&&b.dailyReturnData,yearlyPerformanceData:b&&b.yearlyPerformanceData}))))),r.a.createElement(h.default,null))}}]),t}(o.PureComponent),R=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var N=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),R(t,[{key:"render",value:function(){var e=this.props,t=e.portfolios,n=e.service,o=n===p.b&&c.a.size(t)>0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{service:n}),o?r.a.createElement(k,{portfolios:t}):r.a.createElement(m,{service:n}))}}]),t}(o.PureComponent);t.a=Object(i.connect)((function(e){return{portfolios:Object(u.P)(e)}}))(N)}}]);