(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{2145:function(e,t,n){"use strict";n.r(t),function(e){var o=n(2),r=n(239),a=n(2598),c=n(170),i=n(0),u=n.n(i),s=n(13),l=n.n(s),f=n(4),p=n(29),h=n(12),d=n.n(h),y=n(7),b=n.n(y),m=n(70),v=n(2599),_=n(223),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var O=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return l()(t),t.state={pending:!0,shouldLoadAccounts:!1,shouldBuildPortfolio:!1,shouldSwitchToPortfolios:!1,shouldCreateAccount:!1,isButtonEnabled:!1},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),E(n,[{key:"componentDidMount",value:function(){this.props.isPortfolioEnabled?this.setState({shouldLoadAccounts:!0,pending:!0}):b.a.navigate("/")}},{key:"findQRAccount",value:function(t){return e.findWhere(t||this.props.allAccounts,{tradingAccountInstrumentType:o.ACCOUNT_TRADING_TYPE.QUANT_RANKS,tradingAccountType:d.a.getPlatformTypeId()})}},{key:"navigateToPortfolio",value:function(e){var t=this.findQRAccount(e);if(t){var n=t.platformAccountId,o=d.a.getPlatformType().toLowerCase();b.a.trigger("platform:switch:account",o,n)}}},{key:"createAccount",value:function(){var t=this.props,n=t.userCurrency,r=t.accountsMap[o.ACCOUNT_TRADING_TYPE.QUANT_RANKS]||{},a=e.contains(r.currencies,n)?n:r.defaultCurrency;this.setState({shouldBuildPortfolio:!1,shouldSilentCreateAccount:!0,isButtonEnabled:!1,pending:!0,currency:a})}},{key:"onCreateAccountError",value:function(){this.setState({shouldBuildPortfolio:!0,shouldSilentCreateAccount:!1,shouldSwitchToPortfolios:!1,isButtonEnabled:!0,pending:!1})}},{key:"onCreateAccountSuccess",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tradingAccounts;this.setState({isButtonEnabled:!0,shouldSilentCreateAccount:!1,isQRAccountCreated:!!this.findQRAccount(t)}),this.navigateToPortfolio(t)}},{key:"onLoadAccountsError",value:function(){this.setState({shouldLoadAccounts:!1,pending:!1})}},{key:"onLoadAccountsSuccess",value:function(){var e=!!this.findQRAccount();this.setState({pending:!1,shouldLoadAccounts:!1,shouldBuildPortfolio:!e,shouldSwitchToPortfolios:e,isButtonEnabled:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.pending,r=t.shouldSilentCreateAccount,a=t.shouldSwitchToPortfolios,c=t.shouldBuildPortfolio,i=t.isButtonEnabled,s=t.shouldLoadAccounts,l=t.currency,f=this.props,p=f.loadAccounts,h=f.createTradingAccount,d=f.defaultLeverage;return u.a.createElement("div",null,n&&u.a.createElement(m.a,{fit:!0}),s&&u.a.createElement(v.a,{onErrorClose:this.onLoadAccountsError,onErrorCancel:this.onLoadAccountsError,onSuccess:this.onLoadAccountsSuccess,action:p}),c&&u.a.createElement("button",{disabled:!i||void 0,className:"btn btn-primary btn-action",onClick:this.createAccount},__("invest.build.portfolio")),a&&u.a.createElement("div",null,u.a.createElement("button",{className:"btn btn-primary btn-action",onClick:function(){return e.navigateToPortfolio()}},__("invest.open.account"))),r&&u.a.createElement(v.a,{onErrorClose:this.onCreateAccountError,onErrorCancel:this.onCreateAccountError,onSuccess:this.onCreateAccountSuccess,action:h,params:[{accountType:o.ACCOUNT_TYPE.REAL,platformType:o.PLATFORM_TYPE.COSMOS,tradingAccountInstrumentType:o.ACCOUNT_TRADING_TYPE.QUANT_RANKS,currency:l,leverage:d}]}))}}]),n}(u.a.Component);t.default=Object(f.connect)((function(e){return{userInstrumentType:Object(p.getUserInstrumentType)(e),allAccounts:Object(p.getUserTradingAccounts)(e),userCurrency:Object(p.getUserCurrency)(e),isPortfolioEnabled:Object(_.isPortfolioEnabled)(e),accountsMap:Object(r.a)(e),defaultLeverage:Object(r.d)(e)}}),(function(e){return{loadAccounts:function(){return e(Object(c.loadAllAccounts)())},createTradingAccount:function(e){return Object(a.a)(e)}}}))(O)}.call(this,n(1))},2228:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var o="quant_architect",r="dma_exchange"},2343:function(e,t,n){"use strict";var o=n(0),r=n.n(o),a=n(1),c=n.n(a),i=n(4),u=n(15),s=n(81),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"render",value:function(){var e=this.props.service;return r.a.createElement("div",{className:"pane pane__column title-container"},r.a.createElement(s.default,{name:e,width:65,height:62}),r.a.createElement("div",{className:"text-primary text-uppercase service-title"},__("invest."+e)))}}]),t}(o.PureComponent),p=n(2228),h=n(2145),d=n(64),y=n.n(d),b=n(2483),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),m(t,[{key:"render",value:function(){var e=this.props.service;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pane pane__column pane__yfluid"},r.a.createElement("div",{className:"service-description"},r.a.createElement("div",{className:"text-block"},r.a.createElement("div",null,y()(__("invest."+e+".description")))))),r.a.createElement("div",{className:"service-action"},e===p.b&&r.a.createElement(h.default,null),e===p.a&&r.a.createElement(b.a,null)))}}]),t}(o.PureComponent),_=n(2),E=n(70),O=n(266),C=n(93),P=n(51),S=n(13),g=n.n(S),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var A=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={status:_.IN_PROCESS},g()(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),w(t,[{key:"tryAgain",value:function(e){e.preventDefault(),this.setState({status:_.IN_PROCESS}),c.a.delay(c.a.callIf(this.load,this.mounted),300)}},{key:"componentDidMount",value:function(){this._mounted=!0,this.load()}},{key:"load",value:function(){this.setState({status:_.IN_PROCESS}),this.props.loadPerformance().then(c.a.callIf(this.onSuccess,this.mounted)).catch(c.a.callIf(this.onError,this.mounted))}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"onSuccess",value:function(e){e?(this.setState({status:_.SUCCESS,loadedPerformance:e}),this.props.onSuccess(e)):this.setState({status:_.ERROR})}},{key:"onError",value:function(){this.setState({status:_.ERROR})}},{key:"mounted",value:function(){return this._mounted}},{key:"render",value:function(){var e=this.props,t=e.onErrorCancel,n=e.onErrorOK,o=e.onErrorClose;return this.state.status===_.ERROR?r.a.createElement(C.a,{title:__("errors.title"),message:__("server.request.generic.error.body",__("funded.client.contact_us.link")),textOK:__("actions.try_again"),onOK:n===c.a.noop?this.tryAgain:n,onCancel:t,onClose:o}):null}}]),t}(o.PureComponent);A.defaultProps={onSuccess:c.a.noop,onErrorCancel:c.a.noop,onErrorOK:c.a.noop,onErrorClose:c.a.noop};var j=Object(i.connect)(null,(function(e,t){var n=t.portfolioProviderId;return{loadPerformance:function(){return e(Object(P.k)(n))}}}))(A),T=n(192),k=(n(600),n(928),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}());var R=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={shouldRunPerformanceLoader:!0,statusOfPerformanceLoader:_.EMPTY,portfolio:{}},g()(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),k(t,[{key:"onPerformanceLoaderSuccess",value:function(e){this.setState({loadedPerformance:e,shouldRunPerformanceLoader:!1,statusOfPerformanceLoader:_.SUCCESS})}},{key:"onPerformanceLoaderError",value:function(){this.setState({shouldRunPerformanceLoader:!1,statusOfPerformanceLoader:_.ERROR})}},{key:"componentWillMount",value:function(){c.a.size(this.props.portfolios)>=1&&this.setState({portfolio:this.props.portfolios[0]})}},{key:"onChangePortfolio",value:function(e){this.setState({portfolio:e,shouldRunPerformanceLoader:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.shouldRunPerformanceLoader,o=t.statusOfPerformanceLoader,a=t.loadedPerformance,i=t.portfolio,u=this.props,s=u.portfolios,l=u.onErrorCancel,f=u.onErrorClose,p=u.universeTypes,d=a||{},y=d.backtestRequest,b=d.backtestPerformance,m=y&&c.a.findWhere(p,{value:y.universeTypeID});return r.a.createElement("div",{className:"pane pane__column quant-architect-portfolio"},r.a.createElement(T.default,{getOptionLabel:function(e){return e.portfolioName},getOptionValue:function(e){return e.portfolioID},onChange:function(t){return e.onChangePortfolio(t)},options:s,defaultValue:i}),n&&r.a.createElement(E.a,{position:"absolute",fit:!0}),n&&r.a.createElement(j,{portfolioProviderId:i.portfolioProviderId,onSuccess:this.onPerformanceLoaderSuccess,onErro:this.onPerformanceLoaderError,onErrorClose:f,onErrorCancel:l}),r.a.createElement("div",{className:"portfolio__wrapper"},o===_.SUCCESS&&r.a.createElement("div",{className:"pane pane__fluid pane__column portfolio__performance"},r.a.createElement("div",{className:"pane pane__fluid pane__row portfolio__performance-row"},r.a.createElement("div",{className:"pane pane__fluid portfolio__performance-row-item"},r.a.createElement(O.a,{compact:!0,invest:!0,universeName:m&&__(m.label),dailyReturnData:b&&b.dailyReturnData,yearlyPerformanceData:b&&b.yearlyPerformanceData}))))),r.a.createElement(h.default,null))}}]),t}(o.PureComponent),N=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var L=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),N(t,[{key:"render",value:function(){var e=this.props,t=e.portfolios,n=e.service,o=n===p.b&&c.a.size(t)>0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{service:n}),o?r.a.createElement(R,{portfolios:t}):r.a.createElement(v,{service:n}))}}]),t}(o.PureComponent);t.a=Object(i.connect)((function(e){return{portfolios:Object(u.P)(e)}}))(L)},2482:function(e,t,n){},2483:function(e,t,n){"use strict";var o=n(2),r=n(0),a=n.n(r),c=n(13),i=n.n(c),u=n(4),s=n(29),l=n(7),f=n.n(l),p=n(1254),h=n(70),d=n(99),y=n(1025),b=n(223),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i()(n),n.state={loading:!0,ready:!1,shouldShowBuyShares:!1,shouldCreateAccount:!1,shouldOpenAccountCreation:!1,createAccountProps:{defaultTradingPlatform:o.ACCOUNT_TRADING_TYPE.SHARE_DEALING,defaultCurrency:e.userCurrency}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),m(t,[{key:"componentDidMount",value:function(){this.props.isSaxoEnabled?this.serviceEnabled():this.serviceDisabled()}},{key:"serviceEnabled",value:function(){this.setState({loading:!1,ready:!0}),this.props.accountId?this.setState({shouldShowBuyShares:!0}):this.setState({shouldCreateAccount:!0})}},{key:"serviceDisabled",value:function(){f.a.navigate("/")}},{key:"createAccount",value:function(){this.setState({shouldOpenAccountCreation:!0})}},{key:"navigateToSaxo",value:function(){window.location=this.props.saxoWebLink}},{key:"onCreateAccount",value:function(){this.navigateToSaxo()}},{key:"onCloseCreateAccount",value:function(){this.setState({shouldOpenAccountCreation:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.ready,c=t.shouldOpenAccountCreation,i=t.shouldShowBuyShares,s=t.shouldCreateAccount,l=t.createAccountProps;return n||!r?a.a.createElement(h.a,null):a.a.createElement("div",{className:"saxo-btn"},i&&a.a.createElement("div",null,a.a.createElement("button",{className:"btn btn-primary btn-action",onClick:function(){return e.navigateToSaxo()}},__("invest.buy.shares"))),s&&a.a.createElement("button",{className:"btn btn-primary btn-action",onClick:this.createAccount},__("invest.create.account")),c&&a.a.createElement(u.Provider,{store:window.store},a.a.createElement(d.b,null,a.a.createElement(p.default,{selectedTab:o.CREATE_ACCOUNT_TAB,onClose:this.onCloseCreateAccount,onCreateAccount:this.onCreateAccount,createAccountProps:l}))))}}]),t}(a.a.Component);t.a=Object(u.connect)((function(e){return{userCurrency:Object(s.getUserCurrency)(e),isSaxoEnabled:Object(b.isSaxoEnabled)(e),accountId:Object(y.a)(e),saxoWebLink:Object(y.b)(e,Object(y.a)(e))}}))(v)},2598:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n(11),r=n.n(o),a=function(e){return r.a.createTradingAccount(e).then((function(e){return e.data}))}},2599:function(e,t,n){"use strict";var o=n(2),r=n(93),a=n(0),c=n.n(a),i=n(1),u=n.n(i),s=n(13),l=n.n(s),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={status:o.EMPTY},l()(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),f(t,[{key:"componentDidMount",value:function(){this._mount=!0,this.run()}},{key:"componentWillUnmount",value:function(){this._mount=!1}},{key:"mounted",value:function(){return this._mount}},{key:"run",value:function(){this.setState({status:o.LOADING});var e=this.props,t=e.onBefore,n=e.action,r=e.params;t(),n.apply(this,r).then(u.a.callIf(this.onSuccess,this.mounted)).catch(u.a.callIf(this.onError,this.mounted))}},{key:"onSuccess",value:function(e){this.setState({status:o.SUCCESS});var t=this.props,n=t.onSuccess,r=t.onAfter;n(e),r(o.SUCCESS)}},{key:"onError",value:function(e){this.setState({status:o.ERROR});var t=this.props,n=t.onError,r=t.onAfter;n(),r(o.ERROR)}},{key:"getStatus",value:function(){return this.state.status}},{key:"render",value:function(){var e=this.state.status,t=this.props,n=t.silentError,a=t.onErrorClose,i=t.onErrorCancel,s=t.onAfter;return n||e!==o.ERROR?null:c.a.createElement(r.a,{title:__("errors.title"),message:__("server.request.generic.error.body",__("funded.client.contact_us.link")),textOK:__("actions.try_again"),onOK:this.run,onCancel:u.a.compose(i,(function(){return s(o.ERROR)})),onClose:u.a.compose(a,(function(){return s(o.ERROR)}))})}}]),t}(c.a.Component);p.defaultProps={onErrorClose:u.a.noop,onErrorCancel:u.a.noop,onError:u.a.noop,onBefore:u.a.noop,onAfter:u.a.noop,onSuccess:u.a.noop,silentError:!1,action:Promise.reject,params:null},t.a=p}}]);