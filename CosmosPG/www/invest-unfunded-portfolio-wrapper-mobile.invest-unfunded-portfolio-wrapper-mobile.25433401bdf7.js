(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["invest-unfunded-portfolio-wrapper-mobile"],{

/***/ "./src/js/modules/portfolio/components/UnfundedPortfolios/mobile/InvestUnfundedPortfolioWrapperMobile.jsx":
/*!****************************************************************************************************************!*\
  !*** ./src/js/modules/portfolio/components/UnfundedPortfolios/mobile/InvestUnfundedPortfolioWrapperMobile.jsx ***!
  \****************************************************************************************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Module uses injected variables (_) */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(_) {/* harmony import */ var components_Loading__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! components/Loading */ \"./src/js/components/Loading.jsx\");\n/* harmony import */ var components_popup_PopupMobile__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! components/popup/PopupMobile */ \"./src/js/components/popup/PopupMobile.jsx\");\n/* harmony import */ var portfolio_portfolio_selectors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! portfolio/portfolio.selectors */ \"./src/js/modules/portfolio/portfolio.selectors.js\");\n/* harmony import */ var modules_portfolio_components_backtest_BacktestRequestRunner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! modules/portfolio/components/backtest/BacktestRequestRunner */ \"./src/js/modules/portfolio/components/backtest/BacktestRequestRunner.jsx\");\n/* harmony import */ var modules_portfolio_components_invest_mobile_InvestPortfolioMobile__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! modules/portfolio/components/invest/mobile/InvestPortfolioMobile */ \"./src/js/modules/portfolio/components/invest/mobile/InvestPortfolioMobile.jsx\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var react_autobind__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-autobind */ \"./node_modules/react-autobind/index.js\");\n/* harmony import */ var react_autobind__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_autobind__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-redux */ \"./node_modules/react-redux/es/index.js\");\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\nfunction mapState(state, _ref) {\n    var portfolioName = _ref.portfolioName;\n\n    return {\n        portfolio: Object(portfolio_portfolio_selectors__WEBPACK_IMPORTED_MODULE_2__[\"getUnfundedPortfolio\"])(state, portfolioName)\n    };\n}\n\nvar InvestUnfundedPortfolioWrapperMobile = function (_React$Component) {\n    _inherits(InvestUnfundedPortfolioWrapperMobile, _React$Component);\n\n    function InvestUnfundedPortfolioWrapperMobile() {\n        _classCallCheck(this, InvestUnfundedPortfolioWrapperMobile);\n\n        var _this = _possibleConstructorReturn(this, (InvestUnfundedPortfolioWrapperMobile.__proto__ || Object.getPrototypeOf(InvestUnfundedPortfolioWrapperMobile)).call(this));\n\n        react_autobind__WEBPACK_IMPORTED_MODULE_6___default()(_this);\n\n        _this.state = {\n            isBacktestReady: false,\n            shouldRunBacktest: true,\n            createdBacktest: null\n        };\n        return _this;\n    }\n\n    _createClass(InvestUnfundedPortfolioWrapperMobile, [{\n        key: 'onBacktestRunnerSuccess',\n        value: function onBacktestRunnerSuccess(createdBacktest) {\n            this.setState({\n                isBacktestReady: true,\n                shouldRunBacktest: false,\n                createdBacktest: createdBacktest\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _state = this.state,\n                shouldRunBacktest = _state.shouldRunBacktest,\n                isBacktestReady = _state.isBacktestReady,\n                createdBacktest = _state.createdBacktest;\n            var _props = this.props,\n                portfolio = _props.portfolio,\n                onClose = _props.onClose,\n                onSuccess = _props.onSuccess;\n\n\n            return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\n                components_popup_PopupMobile__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n                {\n                    title: __('portfolio.table.investment_funds'),\n                    leftComponent: react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\n                        components_popup_PopupMobile__WEBPACK_IMPORTED_MODULE_1__[\"default\"].NavLeft,\n                        null,\n                        react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\n                            'button',\n                            { onClick: onClose, className: 'pane pane__row pane_padded-small' },\n                            react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\n                                'span',\n                                { className: 'popup-mobile__nav-rotate' },\n                                react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement('i', { className: 'icon-view-details' })\n                            ),\n                            '\\xA0',\n                            __('actions.back')\n                        )\n                    )\n                },\n                react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\n                    components_popup_PopupMobile__WEBPACK_IMPORTED_MODULE_1__[\"default\"].Body,\n                    { additionalClassName: 'pane flex-column fs-13 portfolios__mobile' },\n                    react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\n                        'div',\n                        { className: 'pane pane__fluid pane__scroll flex-column fs-13' },\n                        react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\n                            'div',\n                            { className: 'pane pane__scroll-content pane__fluid flex-column fs-13 portfolios__mobile' },\n                            shouldRunBacktest && react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(components_Loading__WEBPACK_IMPORTED_MODULE_0__[\"default\"], { position: 'absolute', fit: true }),\n                            shouldRunBacktest && react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(modules_portfolio_components_backtest_BacktestRequestRunner__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                filters: portfolio && portfolio.filters,\n                                onSuccess: this.onBacktestRunnerSuccess,\n                                onErrorOK: onClose }),\n                            isBacktestReady && react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(modules_portfolio_components_invest_mobile_InvestPortfolioMobile__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                portfolioName: portfolio && portfolio.portfolioName,\n                                backtest: createdBacktest,\n                                onSuccess: onSuccess,\n                                onClose: onClose,\n                                onErrorClose: onClose,\n                                onErrorCancel: onClose })\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return InvestUnfundedPortfolioWrapperMobile;\n}(react__WEBPACK_IMPORTED_MODULE_5___default.a.Component);\n\nInvestUnfundedPortfolioWrapperMobile.defaultProps = {\n    onClose: _.noop,\n    onSuccess: _.noop\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_7__[\"connect\"])(mapState)(InvestUnfundedPortfolioWrapperMobile));\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! underscore */ \"./node_modules/underscore/underscore.js\")))\n\n//# sourceURL=webpack:///./src/js/modules/portfolio/components/UnfundedPortfolios/mobile/InvestUnfundedPortfolioWrapperMobile.jsx?");

/***/ }),

/***/ "./src/js/modules/portfolio/components/invest/mobile/InvestPortfolioMobile.jsx":
/*!*************************************************************************************!*\
  !*** ./src/js/modules/portfolio/components/invest/mobile/InvestPortfolioMobile.jsx ***!
  \*************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var common_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! common.types */ \"./src/js/common.types.js\");\n/* harmony import */ var components_form_actions_PlusMinusButtons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! components/form/actions/PlusMinusButtons */ \"./src/js/components/form/actions/PlusMinusButtons.jsx\");\n/* harmony import */ var components_form_input_Input__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! components/form/input/Input */ \"./src/js/components/form/input/Input.jsx\");\n/* harmony import */ var components_Loading__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! components/Loading */ \"./src/js/components/Loading.jsx\");\n/* harmony import */ var confirm_dialog_components_ConfirmBox__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! confirm-dialog/components/ConfirmBox */ \"./src/js/modules/confirm-dialog/components/ConfirmBox.js\");\n/* harmony import */ var core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core */ \"./src/js/core.js\");\n/* harmony import */ var core__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var modules_portfolio_components_loaders_PortfolioMinimumAmountLoader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! modules/portfolio/components/loaders/PortfolioMinimumAmountLoader */ \"./src/js/modules/portfolio/components/loaders/PortfolioMinimumAmountLoader.jsx\");\n/* harmony import */ var portfolio_portfolio_actions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! portfolio/portfolio.actions */ \"./src/js/modules/portfolio/portfolio.actions.js\");\n/* harmony import */ var portfolio_portfolio_const__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! portfolio/portfolio.const */ \"./src/js/modules/portfolio/portfolio.const.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var react_autobind__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-autobind */ \"./node_modules/react-autobind/index.js\");\n/* harmony import */ var react_autobind__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_autobind__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-redux */ \"./node_modules/react-redux/es/index.js\");\n/* harmony import */ var redux_form__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! redux-form */ \"./node_modules/redux-form/es/index.js\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/underscore.js\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var user_user_model__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! user/user.model */ \"./src/js/modules/user/user.model.js\");\n/* harmony import */ var user_user_model__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(user_user_model__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var modules_user_user_consts__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! modules/user/user.consts */ \"./src/js/modules/user/user.consts.js\");\n/* harmony import */ var modules_user_user_selectors__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! modules/user/user.selectors */ \"./src/js/modules/user/user.selectors.js\");\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction mapState(state) {\n    return {\n        marginLevelRange: Object(modules_user_user_selectors__WEBPACK_IMPORTED_MODULE_16__[\"getUserMarginLevelRange\"])(state)\n    };\n}\n\nvar renderControl = function renderControl(_ref) {\n    var _ref$input = _ref.input,\n        value = _ref$input.value,\n        onChange = _ref$input.onChange,\n        onBlur = _ref$input.onBlur,\n        onFocus = _ref$input.onFocus,\n        name = _ref$input.name,\n        className = _ref.className,\n        step = _ref.step,\n        _ref$meta = _ref.meta,\n        error = _ref$meta.error,\n        valid = _ref$meta.valid;\n\n    return react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n        'div',\n        { className: className },\n        react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(components_form_input_Input__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n            name: name,\n            type: 'text',\n            className: 'form-control input-field',\n            value: value,\n            onChange: onChange,\n            onFocus: onFocus,\n            onBlur: onBlur,\n            error: !valid,\n            errorMessage: error\n        }),\n        react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(components_form_actions_PlusMinusButtons__WEBPACK_IMPORTED_MODULE_1__[\"default\"], { onPlusClick: function onPlusClick() {\n                return onChange(value && Number(value) - step > -1 ? Number(value) + step : step);\n            },\n            onMinusClick: function onMinusClick() {\n                return onChange(value && Number(value) - step > -1 ? Number(value) - step : 0);\n            } })\n    );\n};\n\nvar InvestPortfolioMobile = function (_React$PureComponent) {\n    _inherits(InvestPortfolioMobile, _React$PureComponent);\n\n    function InvestPortfolioMobile(props) {\n        _classCallCheck(this, InvestPortfolioMobile);\n\n        var _this = _possibleConstructorReturn(this, (InvestPortfolioMobile.__proto__ || Object.getPrototypeOf(InvestPortfolioMobile)).call(this, props));\n\n        _this.state = {\n            minAmount: 0,\n            statusOfAmountLoader: common_types__WEBPACK_IMPORTED_MODULE_0__[\"LOADING\"],\n            maxAmount: 0,\n            defaultAmount: 0,\n            statusOfBuilding: common_types__WEBPACK_IMPORTED_MODULE_0__[\"EMPTY\"],\n            shouldLoadAmount: true\n        };\n\n        _this.amountLoaderRef = react__WEBPACK_IMPORTED_MODULE_9___default.a.createRef();\n\n        react_autobind__WEBPACK_IMPORTED_MODULE_10___default()(_this);\n        return _this;\n    }\n\n    _createClass(InvestPortfolioMobile, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var defaultAmount = this.props.defaultAmount();\n\n            this._mounted = true;\n            this.inputStep = this.props.getStepIncrement(defaultAmount);\n            this.props.change('amount', defaultAmount);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this._mounted = false;\n        }\n    }, {\n        key: 'componentWillUpdate',\n        value: function componentWillUpdate(nextProps) {\n            this.props.change('portfolioName', nextProps.portfolioName);\n            this.props.change('backtestID', nextProps.backtest && nextProps.backtest.backtest.backtestID);\n        }\n    }, {\n        key: 'mounted',\n        value: function mounted() {\n            return this._mounted;\n        }\n    }, {\n        key: 'onLoadMinAmountSuccess',\n        value: function onLoadMinAmountSuccess(minAmount) {\n            var defaultAmount = this.props.defaultAmount();\n\n            if (defaultAmount < minAmount) {\n                this.props.change('amount', minAmount);\n            }\n\n            this.setState({\n                minAmount: minAmount,\n                statusOfAmountLoader: common_types__WEBPACK_IMPORTED_MODULE_0__[\"SUCCESS\"],\n                shouldLoadAmount: false\n            });\n        }\n    }, {\n        key: 'getCommonData',\n        value: function getCommonData() {\n            return {\n                minAmount: this.state.minAmount,\n                freeMargin: user_user_model__WEBPACK_IMPORTED_MODULE_14___default.a.getUserAccountMetricsModel().getBuyingPower()\n            };\n        }\n    }, {\n        key: 'onBuildPortfolioSuccess',\n        value: function onBuildPortfolioSuccess(builtPortfolio) {\n            this.props.onSuccess(builtPortfolio);\n\n            return builtPortfolio;\n        }\n    }, {\n        key: 'onBuildPortfolioError',\n        value: function onBuildPortfolioError() {\n            this.setState({ statusOfBuilding: common_types__WEBPACK_IMPORTED_MODULE_0__[\"ERROR\"] });\n        }\n    }, {\n        key: 'onErrorBuildingCancel',\n        value: function onErrorBuildingCancel() {\n            this.setState({ statusOfBuilding: common_types__WEBPACK_IMPORTED_MODULE_0__[\"EMPTY\"] });\n        }\n    }, {\n        key: 'onErrorBuildingClose',\n        value: function onErrorBuildingClose() {\n            this.setState({ statusOfBuilding: common_types__WEBPACK_IMPORTED_MODULE_0__[\"EMPTY\"] });\n        }\n    }, {\n        key: 'trySubmitAgain',\n        value: function trySubmitAgain() {\n            this.props.dispatch(Object(redux_form__WEBPACK_IMPORTED_MODULE_12__[\"submit\"])(this.props.form));\n        }\n    }, {\n        key: 'tryLoadAmountAgain',\n        value: function tryLoadAmountAgain() {\n            this.amountLoaderRef.current.load();\n        }\n    }, {\n        key: 'validateAmount',\n        value: function validateAmount(value) {\n            var minAmount = this.state.minAmount;\n\n            var _getCommonData = this.getCommonData(),\n                freeMargin = _getCommonData.freeMargin;\n\n            if (value < minAmount) {\n                return __('portfolio.amount.popup.error.amount_less_minimum', minAmount);\n            }\n\n            if (value > freeMargin || freeMargin < minAmount) {\n                return react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                    'span',\n                    { key: 'insufficient-funds' },\n                    __('portfolio.amount.popup.error.insufficient_funds'),\n                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                        'a',\n                        { className: 'cursor--pointer', onClick: function onClick() {\n                                return core__WEBPACK_IMPORTED_MODULE_5___default.a.trigger('ui:deposit');\n                            } },\n                        __('portfolio.amount.popup.error.add_funds')\n                    )\n                );\n            }\n        }\n    }, {\n        key: 'validateTakeProfit',\n        value: function validateTakeProfit(value, allValues, _ref2) {\n            var syncErrors = _ref2.syncErrors;\n        }\n    }, {\n        key: 'validateStopLoss',\n        value: function validateStopLoss(value, allValues, _ref3) {\n            var syncErrors = _ref3.syncErrors;\n\n            var _getCommonData2 = this.getCommonData(),\n                freeMargin = _getCommonData2.freeMargin,\n                minAmount = _getCommonData2.minAmount;\n\n            var userAmount = Number(allValues.amount);\n            var amount = syncErrors && syncErrors.amount ? freeMargin : userAmount;\n\n            value = Number(value);\n\n            if (underscore__WEBPACK_IMPORTED_MODULE_13___default.a.isNaN(value)) {\n                return;\n            }\n\n            if (value > amount) {\n                return __('portfolio.errors.stopLoss.too_high', amount);\n            }\n        }\n    }, {\n        key: 'submit',\n        value: function submit(values, dispatch, form) {\n            var amount = values.amount,\n                takeProfit = values.takeProfit,\n                stopLoss = values.stopLoss,\n                portfolioName = values.portfolioName;\n\n            var backtest = this.props.backtest && this.props.backtest.backtest;\n\n            form.clearSubmitErrors();\n            form.startSubmit();\n\n            dispatch(Object(portfolio_portfolio_actions__WEBPACK_IMPORTED_MODULE_7__[\"buildPortfolio\"])(portfolioName, backtest, null, null, amount, takeProfit, stopLoss, { autoDeleteLocalPortfolio: false })).then(function (result) {\n                form.setSubmitSucceeded();\n\n                return result;\n            }).then(underscore__WEBPACK_IMPORTED_MODULE_13___default.a.callIf(this.onBuildPortfolioSuccess, this.mounted)).then(function (builtPortfolio) {\n                dispatch(Object(portfolio_portfolio_actions__WEBPACK_IMPORTED_MODULE_7__[\"deleteLocalPortfolio\"])(builtPortfolio.strategyName));\n\n                return builtPortfolio;\n            }).catch(function () {\n                form.setSubmitFailed();\n\n                return Promise.reject();\n            }).catch(underscore__WEBPACK_IMPORTED_MODULE_13___default.a.callIf(this.onBuildPortfolioError, this.mounted));\n\n            return false;\n        }\n    }, {\n        key: 'isLiquidation',\n        value: function isLiquidation() {\n            return underscore__WEBPACK_IMPORTED_MODULE_13___default.a.contains(modules_user_user_consts__WEBPACK_IMPORTED_MODULE_15__[\"MARGIN_VALUES_WARNING_LEVELS\"], this.props.marginLevelRange);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                backtest = _props.backtest,\n                portfolioName = _props.portfolioName,\n                invalid = _props.invalid,\n                onClose = _props.onClose,\n                handleSubmit = _props.handleSubmit,\n                submitting = _props.submitting,\n                submitFailed = _props.submitFailed,\n                onErrorCancel = _props.onErrorCancel,\n                onErrorClose = _props.onErrorClose,\n                normalizeNumber = _props.normalizeNumber;\n\n            var userCurrency = user_user_model__WEBPACK_IMPORTED_MODULE_14___default.a.getUserCurrency();\n            var _state = this.state,\n                shouldLoadAmount = _state.shouldLoadAmount,\n                statusOfAmountLoader = _state.statusOfAmountLoader;\n\n\n            if (submitFailed) {\n                return react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(confirm_dialog_components_ConfirmBox__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                    title: __('errors.title'),\n                    message: __('server.request.generic.error.body', __('funded.client.contact_us.link')),\n                    textOK: __('actions.try_again'),\n                    onOK: this.trySubmitAgain,\n                    onCancel: onClose,\n                    onClose: onClose\n                });\n            }\n\n            if (statusOfAmountLoader === common_types__WEBPACK_IMPORTED_MODULE_0__[\"ERROR\"]) {\n                return react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(confirm_dialog_components_ConfirmBox__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                    title: __('errors.title'),\n                    message: __('server.request.generic.error.body', __('funded.client.contact_us.link')),\n                    textOK: __('actions.try_again'),\n                    onOK: this.tryLoadAmountAgain,\n                    onCancel: onClose,\n                    onClose: onClose\n                });\n            }\n\n            return react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                'div',\n                { className: 'pane pane__scroll-content pane__fluid flex-column fs-13' },\n                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                    'div',\n                    { className: 'pane pane__fluid pane__column portfolio__invest' },\n                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                        'div',\n                        { className: 'pane pane__fluid' },\n                        submitting && react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(components_Loading__WEBPACK_IMPORTED_MODULE_3__[\"default\"], { position: 'absolute', fit: true }),\n                        submitFailed && react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(confirm_dialog_components_ConfirmBox__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                            title: __('errors.title'),\n                            message: __('server.request.generic.error.body', __('funded.client.contact_us.link')),\n                            textOK: __('actions.try_again'),\n                            onOK: this.buildPortfolio,\n                            onCancel: this.onErrorBuildingCancel,\n                            onClose: this.onErrorBuildingClose\n                        }),\n                        react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                            redux_form__WEBPACK_IMPORTED_MODULE_12__[\"Form\"],\n                            {\n                                autoComplete: 'off',\n                                onSubmit: handleSubmit(this.submit),\n                                className: 'form form__amount pane pane__fluid pane__column pane_padded-small pane--relative' },\n                            shouldLoadAmount && react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(modules_portfolio_components_loaders_PortfolioMinimumAmountLoader__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                                ref: this.amountLoaderRef,\n                                backtestOverviewPositions: backtest && backtest.overview.lastPortfolioData.positions,\n                                portfolioName: portfolioName,\n                                onSuccess: this.onLoadMinAmountSuccess,\n                                onErrorCancel: onErrorCancel,\n                                onErrorClose: onErrorClose }),\n                            react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                'div',\n                                { key: 'invest-portfolio-form', className: 'pane pane__fluid pane__column' },\n                                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                    'div',\n                                    { className: 'portfolio__invest-portfolio-name fs-13 bold' },\n                                    portfolioName\n                                ),\n                                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                    'div',\n                                    { className: 'portfolios__mobile-padding-box' },\n                                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                        'div',\n                                        { className: 'pane__column' },\n                                        react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                            'div',\n                                            { className: 'pane pane__fluid fs-13 bold' },\n                                            __('portfolio.amount.popup.amount'),\n                                            ' - ',\n                                            userCurrency\n                                        ),\n                                        react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(redux_form__WEBPACK_IMPORTED_MODULE_12__[\"Field\"], {\n                                            name: 'amount',\n                                            className: 'pane',\n                                            component: renderControl,\n                                            step: this.inputStep,\n                                            validate: this.validateAmount,\n                                            normalize: normalizeNumber\n                                        })\n                                    ),\n                                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                        'div',\n                                        { className: 'pane__column' },\n                                        react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                            'div',\n                                            { className: 'pane pane__fluid fs-13 pane__row flex-valign-center' },\n                                            react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                                'div',\n                                                { className: 'pane' },\n                                                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement('i', { className: 'icon icon-information', 'aria-label': __('portfolio.amount.popup.tooltip.take_profit') })\n                                            ),\n                                            react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                                'div',\n                                                { className: 'pane pane__fluid' },\n                                                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                                    'div',\n                                                    null,\n                                                    __('portfolio.amount.popup.take_profit')\n                                                ),\n                                                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                                    'div',\n                                                    null,\n                                                    userCurrency\n                                                )\n                                            )\n                                        ),\n                                        react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(redux_form__WEBPACK_IMPORTED_MODULE_12__[\"Field\"], {\n                                            name: 'takeProfit',\n                                            className: 'pane',\n                                            component: renderControl,\n                                            step: this.inputStep,\n                                            validate: this.validateTakeProfit,\n                                            normalize: normalizeNumber\n                                        })\n                                    ),\n                                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                        'div',\n                                        { className: 'pane__column' },\n                                        react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                            'div',\n                                            { className: 'pane pane__fluid fs-13 pane__row flex-valign-center' },\n                                            react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                                'div',\n                                                { className: 'pane' },\n                                                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement('i', { className: 'icon icon-information', 'aria-label': __('portfolio.amount.popup.tooltip.stop_loss') })\n                                            ),\n                                            react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                                'div',\n                                                { className: 'pane pane__fluid' },\n                                                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                                    'div',\n                                                    null,\n                                                    __('portfolio.amount.popup.stop_loss')\n                                                ),\n                                                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                                    'div',\n                                                    null,\n                                                    userCurrency\n                                                )\n                                            )\n                                        ),\n                                        react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(redux_form__WEBPACK_IMPORTED_MODULE_12__[\"Field\"], {\n                                            name: 'stopLoss',\n                                            className: 'pane',\n                                            component: renderControl,\n                                            step: this.inputStep,\n                                            validate: this.validateStopLoss,\n                                            normalize: normalizeNumber\n                                        })\n                                    ),\n                                    react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(redux_form__WEBPACK_IMPORTED_MODULE_12__[\"Field\"], { name: 'portfolioName', component: 'input', type: 'hidden', value: portfolioName })\n                                )\n                            ),\n                            this.isLiquidation() && react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                'div',\n                                { className: 'p-10 messages error fs-13' },\n                                __('margin.level_2.buy_sell_button_tooltip.description')\n                            ),\n                            react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                'div',\n                                { className: 'pane pane__row portfolio__invest_btn-row fs-16' },\n                                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                    'button',\n                                    {\n                                        className: 'btn btn-default pane pane__fluid flex-align-center',\n                                        type: 'button',\n                                        onClick: onClose\n                                    },\n                                    __('cancel')\n                                ),\n                                react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement(\n                                    'button',\n                                    {\n                                        className: 'btn btn-primary pane pane__fluid flex-align-center',\n                                        type: 'submit',\n                                        disabled: this.isLiquidation() || invalid || statusOfAmountLoader !== common_types__WEBPACK_IMPORTED_MODULE_0__[\"SUCCESS\"]\n                                    },\n                                    __('actions.place_order')\n                                )\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return InvestPortfolioMobile;\n}(react__WEBPACK_IMPORTED_MODULE_9___default.a.PureComponent);\n\nInvestPortfolioMobile.defaultProps = {\n    onSuccess: underscore__WEBPACK_IMPORTED_MODULE_13___default.a.noop,\n    onClose: underscore__WEBPACK_IMPORTED_MODULE_13___default.a.noop\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(redux_form__WEBPACK_IMPORTED_MODULE_12__[\"reduxForm\"])({\n    form: portfolio_portfolio_const__WEBPACK_IMPORTED_MODULE_8__[\"PORTFOLIO_PLACE_ORDER_FORM_NAME\"],\n    initialValues: {\n        amount: 0,\n        portfolioName: ''\n    },\n\n    defaultAmount: function defaultAmount() {\n        return parseInt(user_user_model__WEBPACK_IMPORTED_MODULE_14___default.a.getUserAccountMetricsModel().getBuyingPower() * .3 / 100) * 100;\n    },\n    getStepIncrement: function getStepIncrement(value) {\n        var intermediateValue = parseInt(value / 10 / portfolio_portfolio_const__WEBPACK_IMPORTED_MODULE_8__[\"ONE_HUNDRED_PERCENT\"]) * portfolio_portfolio_const__WEBPACK_IMPORTED_MODULE_8__[\"ONE_HUNDRED_PERCENT\"];\n\n        return intermediateValue > 100 ? intermediateValue : 100;\n    },\n    normalizeNumber: function normalizeNumber(value, previousValue) {\n        if (underscore__WEBPACK_IMPORTED_MODULE_13___default.a.isEmpty(value)) {\n            return value;\n        }\n\n        return (/^\\d*\\.?\\d{0,2}$/gi.test(value) ? value : previousValue\n        );\n    }\n})(Object(react_redux__WEBPACK_IMPORTED_MODULE_11__[\"connect\"])(mapState)(InvestPortfolioMobile)));\n\n//# sourceURL=webpack:///./src/js/modules/portfolio/components/invest/mobile/InvestPortfolioMobile.jsx?");

/***/ })

}]);