(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{1921:function(e,t,n){"use strict";n.r(t),n.d(t,"BasicDashboardDesktop",(function(){return T}));var i=n(3),a=n(232),o=n.n(a),r=n(2019),s=n(5),l=n.n(s),c=n(644),p=n.n(c),u=n(965),h=n(2023),d=n(2024),f=n.n(d),m=n(2394),y=n.n(m),v=n(313),g=n.n(v),S=n(0),E=n.n(S),b=n(7),_=n.n(b),P=n(4),O=n(261),z=n.n(O),w=n(263),C=n(46),I=n(59),N=n(1),x=n.n(N),M=n(145),L=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var T=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),L(t,[{key:"render",value:function(){var e=this.props,t=e.section,n=e.asideBoxState,a=e.toggleAsideBox,s=e.onSecondaryPaneSizeChange,l=(e.chartVisibility,e.chartState),c=(e.chartHeight,e.instrumentInfoVisibility),d=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["section","asideBoxState","toggleAsideBox","onSecondaryPaneSizeChange","chartVisibility","chartState","chartHeight","instrumentInfoVisibility"]),m=_()({pane:!0,"aside-box hidden-xs":!0,"aside-box-opened":n===i.OPEN,"aside-box-closed":n===i.CLOSED});return E.a.createElement("div",{className:"pane pane--height pane__fluid"},E.a.createElement("div",{className:m},E.a.createElement("div",{className:"aside-panel"},E.a.createElement("div",{className:"search-box"},E.a.createElement("div",{className:"search-panel search-wrapper"},E.a.createElement(o.a,{name:g.a,options:{autoRender:!1}}))),E.a.createElement("div",{className:"instruments-tree-box"},E.a.createElement("div",{className:"instruments-tree-panel"},E.a.createElement(z.a,{className:"instruments-tree-content left_menu-wrapper"},E.a.createElement(M.LazyInstrumentTreeContainer,null)))),E.a.createElement("div",{className:"account-box"},E.a.createElement("div",{className:"account-panel account_info-wrapper"},E.a.createElement(o.a,{name:p.a.view})))),E.a.createElement("div",{className:"aside-splitter-box hidden-xs",onClick:a},E.a.createElement("div",{className:"aside-splitter-panel"}))),E.a.createElement("div",{className:"pane pane__scroll"},E.a.createElement(r.a,{vertical:!0,primaryIndex:0,lock:l===i.COLLAPSED,collapse:l===i.COLLAPSED,collapseSize:i.BASIC_VIEW_COLLAPSED_CHART_HEIGHT,secondaryInitialSize:i.BASIC_VIEW_INITIAL_CHART_HEIGHT,secondaryMinSize:i.BASIC_VIEW_MIN_CHART_HEIGHT,isActive:l===i.EXPANDED,onSecondaryPaneSizeChange:s},E.a.createElement("div",{className:"tab-box"},E.a.createElement(h.a,null,E.a.createElement(z.a,null,E.a.createElement(M.LazyBasicInstrumentDetails,null))),E.a.createElement(h.a,{invert:!0},E.a.createElement("div",{className:"pane pane__xfluid pane__yfluid pane--height"},t===i.UI_SECTION_TRADING&&E.a.createElement(z.a,{className:"pane pane__fluid pane--height flex-scrollbar"},E.a.createElement(M.LazyBasicCategoryInstruments,null)),t===i.UI_SECTION_FAVORITES&&E.a.createElement(z.a,{className:"pane pane__fluid pane--height"},E.a.createElement(M.LazyBasicFavorites,null)),t===i.UI_SECTION_OPEN_POSITION&&E.a.createElement(z.a,{className:"pane pane__fluid pane--height"},E.a.createElement(M.LazyBasicOpenPositions,null)),t===i.UI_SECTION_ORDERS&&E.a.createElement(z.a,{className:"pane pane__fluid pane--height"},E.a.createElement(M.LazyBasicOrders,null)),t===i.UI_SECTION_CLOSED_POSITIONS&&E.a.createElement(M.LazyClosedPositions,{className:"pane pane__fluid pane--height"}),t===i.UI_SECTION_CANCELED_ORDERS&&E.a.createElement(M.LazyOrderHistory,{className:"pane pane__fluid pane--height"}),t===i.UI_SECTION_PRICE_ALERTS&&E.a.createElement(M.LazyPriceAlerts,{className:"pane pane__fluid pane--height"}),t===i.UI_SECTION_PORTFOLIOS&&d.isPortfoliosEnabled&&E.a.createElement(M.LazyPortfolios,{className:"pane pane--height pane__fluid"}),t===i.UI_SECTION_INVEST&&(d.isPortfoliosEnabled||d.isDmaEnabled)&&E.a.createElement(M.LazyInvest,{className:"pane pane--height pane__fluid"})))),c===i.VISIBLE&&E.a.createElement(u.default,null)),E.a.createElement(o.a,{name:f.a,className:"floating-open-positions hidden-xs hidden-sm hidden-md",options:{enabled:n===i.CLOSED}})),n===i.CLOSED&&E.a.createElement(o.a,{name:y.a,className:"floating-account-info"}))}}]),t}(E.a.Component);t.default=Object(P.connect)((function(e){return{section:e.ui.section||e.ui.initialSection,asideBoxState:Object(I.getAsideBoxState)(e),chartVisibility:Object(I.getChartVisibility)(e),chartState:Object(I.getChartState)(e),chartHeight:Object(I.getChartHeight)(e),instrumentInfoVisibility:Object(I.getInstrumentInfoVisibility)(e),isPortfoliosEnabled:Object(w.isPortfolioEnabled)(e),isSaxoEnabled:Object(w.isSaxoEnabled)(e)}}),(function(e){return{toggleAsideBox:function(){e(Object(C.toggleAsideBox)()),x.a.delay((function(){return l.a.trigger("ui:chart:reflow")}),0)},onSecondaryPaneSizeChange:function(t){e(Object(C.resizeChart)({height:t})),x.a.delay((function(){return l.a.trigger("ui:chart:reflow")}),0)}}}))(T)},2019:function(e,t,n){"use strict";var i=n(0),a=n.n(i),o=n(7),r=n.n(o);function s(e){var t=e.size||0,n=e.percentage?"%":"px",i="layout-pane",o={};return e.primary?i+=" layout-pane-primary":e.vertical?o.height=""+t+n:o.width=""+t+n,a.a.createElement("div",{className:i,style:o},e.children)}s.defaultProps={vertical:!1,primary:!1,size:0,percentage:!1,children:[]};var l=s,c=(n(2022),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());function p(){if(document.body.createTextRange){var e=document.body.createTextRange();e.collapse(),e.select()}else window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleResize=n.handleResize.bind(n),n.handleMouseMove=n.handleMouseMove.bind(n),n.handleMouseUp=n.handleMouseUp.bind(n),n.handleTouchMove=n.handleTouchMove.bind(n),n.handleSplitterMouseDown=n.handleSplitterMouseDown.bind(n),n.state={secondaryPaneSize:0,resizing:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),c(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchend",this.handleMouseUp),document.addEventListener("touchmove",this.handleTouchMove);var e=void 0;if(void 0!==this.props.secondaryInitialSize)e=this.props.secondaryInitialSize;else{var t=this.container.getBoundingClientRect(),n=void 0;n=this.splitter?this.splitter.getBoundingClientRect():{width:10,height:10},e=this.getSecondaryPaneSize(t,n,{left:t.left+(t.width-n.width)/2,top:t.top+(t.height-n.height)/2},!1)}this.setState({secondaryPaneSize:e})}},{key:"componentDidUpdate",value:function(e,t){t.secondaryPaneSize!==this.state.secondaryPaneSize&&this.props.onSecondaryPaneSizeChange&&this.props.onSecondaryPaneSizeChange(this.state.secondaryPaneSize),t.resizing!==this.state.resizing&&(this.state.resizing?this.props.onDragStart&&this.props.onDragStart():this.props.onDragEnd&&this.props.onDragEnd())}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("touchend",this.handleMouseUp),document.removeEventListener("touchmove",this.handleTouchMove)}},{key:"getSecondaryPaneSize",value:function(e,t,n,i){if("number"==typeof this.props.secondaryPaneSize)return this.props.secondaryPaneSize;var a=void 0,o=void 0,r=void 0;this.props.vertical?(a=e.height,o=t.height,r=n.top-e.top):(a=e.width,o=t.width,r=n.left-e.left),i&&(r-=o/2),r<0?r=0:r>a-o&&(r=a-o);var s=void 0,l=a-o-(s=1===this.props.primaryIndex?r:a-o-r);return this.props.percentage&&(s=100*s/a,l=100*l/a,o=100*o/a,a=100),l<this.props.primaryMinSize?s=Math.max(s-(this.props.primaryMinSize-l),0):s<this.props.secondaryMinSize&&(s=Math.min(a-o-this.props.primaryMinSize,this.props.secondaryMinSize)),s}},{key:"getSecondaryPaneSizeValue",value:function(){return this.state.secondaryPaneSize}},{key:"setSecondaryPaneSize",value:function(e,t,n){var i=this.container.getBoundingClientRect().height;(e<=i||n)&&this.setState({secondaryPaneSize:t?100*i/e:e})}},{key:"handleResize",value:function(){if(this.splitter&&!this.props.percentage){var e=this.container.getBoundingClientRect(),t=this.splitter.getBoundingClientRect(),n=this.getSecondaryPaneSize(e,t,{left:t.left,top:t.top},!1);this.setState({secondaryPaneSize:n})}}},{key:"handleMouseMove",value:function(e){if(this.state.resizing){var t=this.container.getBoundingClientRect(),n=this.splitter.getBoundingClientRect(),i=this.getSecondaryPaneSize(t,n,{left:e.clientX,top:e.clientY},!0);p(),this.setState({secondaryPaneSize:i})}}},{key:"handleTouchMove",value:function(e){this.handleMouseMove(e.changedTouches[0])}},{key:"handleSplitterMouseDown",value:function(){this.props.lock||(p(),this.setState({resizing:!0}))}},{key:"handleMouseUp",value:function(){this.setState((function(e){return e.resizing?{resizing:!1}:null}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.collapse,i=t.collapseSize,o=t.isActive,s="splitter-layout";this.props.customClassName&&(s+=" "+this.props.customClassName),this.props.vertical&&(s+=" splitter-layout-vertical"),this.state.resizing&&(s+=" layout-changing");var c=a.a.Children.toArray(this.props.children).slice(0,2);0===c.length&&c.push(a.a.createElement("div",null));for(var p=[],u=0!==this.props.primaryIndex&&1!==this.props.primaryIndex?0:this.props.primaryIndex,h=0;h<c.length;++h){var d=!0,f=null;c.length>1&&h!==u&&(d=!1,f=n?i:this.state.secondaryPaneSize),p.push(a.a.createElement(l,{vertical:this.props.vertical,percentage:this.props.percentage,primary:d,size:f},c[h]))}var m=r()({"pane pane__column":!0,separator__active:o});return a.a.createElement("div",{className:s,ref:function(t){e.container=t}},p[0],p.length>1&&a.a.createElement("div",{role:"separator",className:"layout-splitter flex flex-align-center",ref:function(t){e.splitter=t},onMouseDown:this.handleSplitterMouseDown,onTouchStart:this.handleSplitterMouseDown},a.a.createElement("span",{className:m},a.a.createElement("hr",{className:"separator__line"}),a.a.createElement("hr",{className:"separator__line"}))),p.length>1&&p[1])}}]),t}(a.a.Component);u.defaultProps={customClassName:"",vertical:!1,percentage:!1,primaryIndex:0,primaryMinSize:0,secondaryInitialSize:void 0,secondaryMinSize:0,onDragStart:null,onDragEnd:null,onSecondaryPaneSizeChange:null,children:[],secondaryPaneSize:null,isActive:!0};t.a=u},2022:function(e,t,n){},2024:function(e,t,n){(function(i){var a;void 0===(a=function(e,t,i){var a=n(0),o=n(1),r=n(22),s=n(5),l=n(100),c=n(89),p=n(2001),u=n(2025).default,h=function(e,t){return function(e){return!o.isNaN(e)&&!o.isNull(e)&&!o.isUndefined(e)}(t.find(e))};i.exports=p.extend({enabled:!1,collection:new l,template:o.template(n(2027)),events:{"click .fn-close":"closePopup","click .open-positions":"updateOpenPositions"},initialize:function(e){var t=this;p.prototype.initialize.apply(this,arguments),this.enabled=this.options.enabled,this.listenTo(s,"ui:click:floating:open-positions",(function(e){t.enabled=e,t.toggle(!t.enabled),t.onPositionsUpdate()})),this.listenTo(c,"update ready",this.onPositionsUpdate),this.render(),this.onPositionsUpdate()},render:function(){p.prototype.render.apply(this,arguments);var e=a.createElement(u,{collection:this.collection});r.render(e,this.$el.find(".positions-container")[0])},onPositionsUpdate:function(){var e=this;if(this.enabled){(0===c.length&&!this.isHidden||c.length>0&&this.isHidden)&&this.toggle(!this.isHidden);var t=c.take(5);t.length===this.collection.length&&t.length===c.length&&o.every(t,(function(t){return h(t,e.collection)}))||(this.collection.reset({silent:!0}),this.collection.set(t),this.$el.find(".number-of-positions").html(__("position.floating.view.footer",[t.length,c.length])))}},closePopup:function(e){p.prototype.closePopup.apply(this,arguments),this.enabled=!1,s.trigger("ui:close:floating:open-positions")},openPositions:function(){s.trigger("ui:header-itemclick"),s.navigate("/open-positions")}})}.call(t,n,t,e))||(e.exports=a)}).call(this,n(1))},2025:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),o=n(2026),r=n.n(o),s=n(26),l=n.n(s),c=n(15),p=n.n(c),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasOpenPositions:!1},p()(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this.props.collection;e&&e.on("add remove",this.update)}},{key:"componentWillUnmount",value:function(){var e=this.props.collection;e&&e.off("add remove",this.update)}},{key:"update",value:function(){this.setState({hasOpenPositions:this.props.collection.length>0})}},{key:"render",value:function(){var e=this.props.collection;return e&&this.state.hasOpenPositions?a.a.createElement("table",null,a.a.createElement("tbody",null,e.map((function(e){var t=l.a.getInstrumentById(e.get("instrumentId")),n=e.get("positionCode");return t?a.a.createElement("tr",{key:n+"-position"},a.a.createElement("td",{className:"instrument-name"},t.get("name")),a.a.createElement("td",{className:"pl_pos position-value"},a.a.createElement(r.a,{key:n+"cell-pl",column:{key:"plOpen"},model:e}))):null})))):null}}]),t}(a.a.Component);t.default=h},2026:function(e,t,n){var i;void 0===(i=function(e,t,i){var a=n(0),o=n(233),r=n(6),s=n(18);i.exports=s({displayName:"exports",getDefaultProps:function(){return{attr:"plOpen"}},getInitialState:function(){return{value:this.props.model.get(this.props.attr)}},componentDidMount:function(){this.props.model.on("change:"+this.props.attr,this.update,this)},componentWillUnmount:function(){this.props.model.off("change:"+this.props.attr,this.update,this)},update:function(){this.setState({value:this.props.model.get(this.props.attr)})},render:function(){return a.createElement(o,{value:this.state.value,precision:2,alwaysPrecision:!0,positiveSymbol:"",prefix:r.getUserCurrencySymbol()})}})}.call(t,n,t,e))||(e.exports=i)},2027:function(e,t){e.exports="<div class=floating-open-positions-container> <div class=header> <i class=dots-icon></i> <span><%=__('tab.open_positions')%></span> <div class=\"fn-close icon-close-white\"></div> </div> <div class=content> <div class=positions-container> </div> <div class=separator><span></span></div> <div class=footer> <span class=number-of-positions></span> <a href=#open-positions class=open-positions><%=__('my.open.positions.link')%></a> </div> </div> </div>"},2394:function(e,t,n){(function(i){var a;void 0===(a=function(e,t,i){var a=n(1),o=(n(12),n(5)),r=n(2001),s=n(6),l=n(9),c=n(73),p=n(102);i.exports=r.extend({template:a.template(n(664)),events:function(){return a.extend({},a.result(r.prototype,"events"),{"click .fn-close":"closePopup"})},initialize:function(e){r.prototype.initialize.apply(this,arguments),this.listenTo(o,"user:account-metrics",this.render)},render:function(){var e=s.getUserAccountMetricsModel(),t=s.getUserCurrencySymbol(),n=c(e.getBalance()).formatForeignCurrency(t),i=c(e.getBuyingPower()).formatForeignCurrency(t),a=c(e.getEquity()).formatForeignCurrency(t),o=c(e.getMarginUsed()).formatForeignCurrency(t),r=c(e.getProfitLoss()).formatForeignCurrency(t),u=e.getProfitLoss()>=0,h=e.getRiskLevel(),d=l.isLive()||!p.LOW_SCORE()||!p.FULL_REGISTRATION_COMPLETED(),f={currency:t,balance:n,buyingPower:i,equity:a,marginUsed:o,profitLoss:r,profitLossPositive:u,riskLevel:h,risk_level_class:"help-risk none",platformType:l.getPlatformType(),isPlatformSwitchAllowed:d};this.$el.html(this.template(f))},resetPosition:function(){this.$el.css({top:"",bottom:"",left:"",right:""})}})}.call(t,n,t,e))||(e.exports=a)}).call(this,n(1))}}]);