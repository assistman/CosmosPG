(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["bonus-progress"],{

/***/ "./src/js/modules/bonus/bonus-progress/bonus.progress.popup.model.js":
/*!***************************************************************************!*\
  !*** ./src/js/modules/bonus/bonus-progress/bonus.progress.popup.model.js ***!
  \***************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(_) {var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function (require, exports, module) {\n    var InProgressView = __webpack_require__(/*! ./in-progress.view */ \"./src/js/modules/bonus/bonus-progress/in-progress.view.js\");\n    var CompletedView = __webpack_require__(/*! ./completed.view */ \"./src/js/modules/bonus/bonus-progress/completed.view.js\");\n    var InProgressModel = __webpack_require__(/*! ./in-progress.model */ \"./src/js/modules/bonus/bonus-progress/in-progress.model.js\");\n    var CompletedModel = __webpack_require__(/*! ./completed.model */ \"./src/js/modules/bonus/bonus-progress/completed.model.js\");\n    var BaseBonusModel = __webpack_require__(/*! ./base.bonus.model */ \"./src/js/modules/bonus/bonus-progress/base.bonus.model.js\");\n\n    module.exports = BaseBonusModel.extend({\n        defaults: function defaults() {\n            return {\n                tabs: [{ id: 'in-progress', name: __('bonus.tab.in_progress'), viewClass: InProgressView, modelClass: InProgressModel }, { id: 'completed', name: __('bonus.tab.completed'), viewClass: CompletedView, modelClass: CompletedModel }],\n                currentTabId: 'in-progress',\n                defaultTabId: 'in-progress'\n            };\n        },\n        initialize: function initialize() {\n            this.load();\n        },\n        getCurrentTab: function getCurrentTab() {\n            return _.findWhere(this.get('tabs'), { id: this.getCurrentTabId() });\n        },\n        getCurrentTabId: function getCurrentTabId() {\n            var currentTabId = this.get('currentTabId');\n\n            if (!currentTabId) {\n                currentTabId = this.get('defaultTabId');\n            }\n\n            return currentTabId;\n        },\n        getCurrentTabName: function getCurrentTabName() {\n            return this.getCurrentTab().name;\n        },\n        getCurrentTabData: function getCurrentTabData() {\n            var tab = this.getCurrentTab();\n\n            var view = tab.viewClass;\n            var model = tab.modelClass;\n\n            return { view: view, model: model };\n        },\n        getTabById: function getTabById(id) {\n            return _.findWhere(this.get('tabs'), { id: id });\n        },\n        enableAllTabs: function enableAllTabs() {\n            _.each(this.get('tabs'), function (item) {\n                return item.disable = false;\n            });\n        },\n        disableTabById: function disableTabById(id) {\n            var tab = this.getTabById(id);\n            if (tab) tab.disable = true;\n        },\n        enableTabById: function enableTabById(id) {\n            var tab = this.getTabById(id);\n            if (tab) tab.disable = false;\n        },\n        setCurrentTabById: function setCurrentTabById(id) {\n            var tab = this.getTabById(id);\n            if (tab) {\n                this.set({\n                    currentTabId: tab.id,\n                    currentTabName: tab.name\n                });\n            }\n\n            return tab;\n        }\n    });\n}).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! underscore */ \"./node_modules/underscore/underscore.js\")))\n\n//# sourceURL=webpack:///./src/js/modules/bonus/bonus-progress/bonus.progress.popup.model.js?");

/***/ }),

/***/ "./src/js/modules/bonus/bonus-progress/bonus.progress.popup.view.js":
/*!**************************************************************************!*\
  !*** ./src/js/modules/bonus/bonus-progress/bonus.progress.popup.view.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(_, $) {var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function (require, exports, module) {\n    var _ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/underscore.js\");\n    var $ = __webpack_require__(/*! jquery */ \"./src/vendors/jbone.js\");\n    var user = __webpack_require__(/*! modules/user/user.model */ \"./src/js/modules/user/user.model.js\");\n    var PopupView = __webpack_require__(/*! modules/popup/popup.view */ \"./src/js/modules/popup/popup.view.js\");\n    var LoadingView = __webpack_require__(/*! modules/loading/loading.view */ \"./src/js/modules/loading/loading.view.js\");\n    var template = _.template(__webpack_require__(/*! ./templates/bonus.progress.popup.html */ \"./src/js/modules/bonus/bonus-progress/templates/bonus.progress.popup.html\"));\n\n    function parseWizardHeader(caption) {\n        var caption = _.map(caption, function (s) {\n            return s.toUpperCase();\n        });\n        return \"<span>\" + _.map(_.initial(caption), function (a) {\n            return \"<span class='color-platform-text-color'>\" + a + \" </span>\";\n        }).join('') + \"<span class='color-platform-accent'>\" + _.last(caption) + \"</span>\" + \"</span>\";\n    }\n\n    module.exports = PopupView.extend({\n\n        className: 'bonus-progress',\n        name: 'bonus-progress',\n\n        events: function events() {\n            return this.addEvents(PopupView)({\n                'click .fn-tab': 'changeTab'\n            });\n        },\n\n        initialize: function initialize(options) {\n            PopupView.prototype.initialize.apply(this, arguments);\n\n            this.listenTo(this.model, 'change:currentTabId', this.updateTab);\n            this.listenTo(this.model, 'change:bonuses', this.loadCompleted);\n\n            this.render();\n        },\n\n        render: function render() {\n            PopupView.prototype.render.call(this);\n\n            this.setContent(template({\n                options: this.options,\n                model: this.model.toJSON(),\n                parseWizardHeader: parseWizardHeader(this.options.caption)\n            }));\n\n            this.showLoading();\n\n            return this;\n        },\n\n        updateTab: function updateTab() {\n            var _model$getCurrentTabD = this.model.getCurrentTabData(),\n                view = _model$getCurrentTabD.view,\n                model = _model$getCurrentTabD.model;\n\n            this.addChildView('.tab-content', view, {\n                model: new model({\n                    bonuses: this.model.getBonuses(),\n                    accountCurrency: user.getUserCurrencySymbol()\n                })\n            });\n\n            this.$('.header-container-xs .caption').html(__(this.model.getCurrentTabName()));\n            this.$('.tab').removeClass('active');\n\n            var tabId = this.model.getCurrentTabId();\n            this.$('.tab[data-tab-id=' + tabId + ']').addClass('active');\n        },\n\n        changeTab: function changeTab(event) {\n            this.model.setCurrentTabById($(event.currentTarget).attr('data-tab-id'));\n        },\n\n        loadCompleted: function loadCompleted() {\n            this.updateTab();\n            this.hideLoading();\n        },\n\n\n        showLoading: function showLoading() {\n            this.addChildView('.bonus-progress-content', LoadingView, { parent: this.$el, translucent: '2' });\n        },\n\n        hideLoading: function hideLoading() {\n            this.removeChildView('.bonus-progress-content');\n        }\n\n    });\n}).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! underscore */ \"./node_modules/underscore/underscore.js\"), __webpack_require__(/*! jquery */ \"./src/vendors/jbone.js\")))\n\n//# sourceURL=webpack:///./src/js/modules/bonus/bonus-progress/bonus.progress.popup.view.js?");

/***/ }),

/***/ "./src/js/modules/bonus/bonus-progress/index.js":
/*!******************************************************!*\
  !*** ./src/js/modules/bonus/bonus-progress/index.js ***!
  \******************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function name(require, exorts, module) {\n    var BonusProgressPopupView = __webpack_require__(/*! modules/bonus/bonus-progress/bonus.progress.popup.view */ \"./src/js/modules/bonus/bonus-progress/bonus.progress.popup.view.js\");\n    var BonusProgressPopupModel = __webpack_require__(/*! modules/bonus/bonus-progress/bonus.progress.popup.model */ \"./src/js/modules/bonus/bonus-progress/bonus.progress.popup.model.js\");\n\n    module.exports = {\n        BonusProgressPopupView: BonusProgressPopupView,\n        BonusProgressPopupModel: BonusProgressPopupModel\n    };\n}).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n//# sourceURL=webpack:///./src/js/modules/bonus/bonus-progress/index.js?");

/***/ }),

/***/ "./src/js/modules/bonus/bonus-progress/templates/bonus.progress.popup.html":
/*!*********************************************************************************!*\
  !*** ./src/js/modules/bonus/bonus-progress/templates/bonus.progress.popup.html ***!
  \*********************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
/***/ (function(module, exports) {

eval("module.exports = \"<div class=\\\"popup-header popup-header-bg-style-grey popup-header-style-default hidden-xs\\\">\\n    <div class=\\\"popup-caption flex flex-valign-center\\\">\\n        <%=parseWizardHeader%>\\n        <span class='question-tooltip' aria-label=\\\"<%=__('bonus.help.message')%>\\\" data-tooltip-align=\\\"right\\\" ></span>\\n    </div>\\n    <div class=\\\"popup-actions fn-close-popup btn\\\">\\n        <i class=\\\"icon-close-blue\\\"></i>\\n    </div>\\n</div>\\n\\n<div class=\\\"visible-xs header-container-xs\\\">\\n    <div class=\\\"left flex fn-close-popup flex-valign-center btn\\\">\\n        <div class=\\\"icon arrow\\\"></div>\\n        <b><%-__('actions.back') %></b>\\n    </div>\\n    <div class=\\\"caption flex flex-valign-center flex-align-center\\\">\\n        <%-model.currentTabName || model.currentTabNameMobile%>\\n    </div>\\n    <div class=\\\"right flex flex-valign-center btn\\\"></div>\\n</div>\\n\\n<div class=\\\"bonus-progress-content\\\">\\n    <div class=\\\"modal-dialog-container\\\"></div>\\n\\n    <div class=\\\"tabs flex flex-row flex-align-start hidden-xs\\\">\\n        <% _.each(model.tabs, function(v) { %>\\n        <div class=\\\"tab fn-tab flex flex-stretch flex-valign-center active <%- model.currentTabId == v.id ? 'active' : '' %>\\\" data-tab-id=\\\"<%- v.id %>\\\"><%- v.name %></div>\\n        <% }) %>\\n    </div>\\n\\n    <div class=\\\"tab-content\\\"></div>\\n</div>\";\n\n//# sourceURL=webpack:///./src/js/modules/bonus/bonus-progress/templates/bonus.progress.popup.html?");

/***/ })

}]);