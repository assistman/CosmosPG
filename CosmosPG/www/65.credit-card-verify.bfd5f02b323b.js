(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{2153:function(t,e,a){var c;void 0===(c=function(t,e,c){var i=a(2687),n=a(2476);c.exports=function(t){return new i(t,n)}}.call(e,a,e,t))||(t.exports=c)},2687:function(t,e,a){(function(c,i){var n;void 0===(n=function(t,e,c){var n=a(2474),s=a(7),o=a(63),d=a(1),r=a(1191),u=a(2),l=u.REJECTED,p=u.PENDING,f=u.APPROVED,C=u.IN_PROCESS,h=n.extend({events:function(){return d.extend({},d.result(n.prototype,"events"),{"change .upload-cc":"previewCCFile","change .cc-verify-select":"changeCC"})},render:function(t){n.prototype.render.call(this),this.ccList.length>0&&this.initCCOptions()},initCCOptions:function(){var t=this;this.ccOptions={},d.each(this.ccList,(function(e){t.ccOptions[e.id]={frontStatus:e.frontStatus,backStatus:e.backStatus,status:e.status}})),this.updateCCStatuses()},getBlockCCRenderTemplateData:function(){return d.extend({},n.prototype.getBlockCCRenderTemplateData.call(this),{shouldUploadCCDocs:!0,ccOptions:this.ccOptions})},getBlockCCMobileRenderTemplateData:function(){return d.extend({},n.prototype.getBlockCCMobileRenderTemplateData.call(this),{shouldUploadCCDocs:!0,ccOptions:this.ccOptions})},updateCCStatuses:function(){var t=this,e=this.getCCId(),a=this.$(".cc-upload-status"),c=this.ccOptions[e],i=function(e){return t.$(e).addClass("hidden")},n=function(e){return t.$(e).removeClass("hidden")};i(".upload-cc-front .doc-status"),i(".upload-cc-back .doc-status"),i(".mobile-upload-cc-front .mobile-upload-status"),i(".mobile-upload-cc-back .mobile-upload-status"),this.$(".cc-verification .fileUpload span").html(__("verification_center.choose_file"));var o=c.frontStatus===p||c.frontStatus===C,d=c.backStatus===p||c.backStatus===C,r=c.frontStatus===f,u=c.backStatus===f,h=c.status;o&&(n(".upload-cc-front .doc-status"),n(".mobile-upload-cc-front .mobile-upload-status"),this.$(".upload-cc-front .fileUpload span").html(__("verification_center.update_file"))),d&&(n(".upload-cc-back .doc-status"),n(".mobile-upload-cc-back .mobile-upload-status"),this.$(".upload-cc-back .fileUpload span").html(__("verification_center.update_file")));var v=this.$(".cc-verification-mobile"),m=function(t,e,a,c){return t.find(e).removeClass("hidden").addClass(a).find(".text").html(c)};switch(a.find(".cc-upload-status div").addClass("hidden"),h===p&&((h=o||d?h:"")||(h=r&&u?f:"")),h){case p:case C:n(".cc-upload-status .in-review"),m(v,".mobile-upload-status-card","in-review",__("verification_center.status.review")),s.trigger("sm","c_verify");break;case f:n(".cc-upload-status .approved"),m(v,".mobile-upload-status-card","approved",__("verification_center.status.approved")),s.trigger("sm","c_verify");break;case l:n(".cc-upload-status .rejected"),m(v,".mobile-upload-status-card","rejected",__("verification_center.status.rejected"));break;default:a.find(".in-review").addClass("hidden"),a.find(".approved").addClass("hidden"),a.find(".rejected").addClass("hidden")}},changeCC:function(t){this.ccid=t.currentTarget.value,this.updateCCStatuses()},getCCId:function(){if(!this.ccid){var t=this.$el.find(".cc-verify-select select")[0];this.ccid=t.value}return this.ccid},previewCCFile:function(t){document.querySelector("#"+i(t.currentTarget).attr("data-id"));var e=t.currentTarget.files[0];e&&(o.uploadDocumentsFileExt.test(e.name)&&e.size<o.uploadDocumentsFileMaxSize?(this.$el.find(".cc-error").addClass("hidden"),this.uploadCCFile(t.currentTarget.form)):t.currentTarget.getAttribute("data-id").indexOf("cc-")>-1&&this.$el.find(".cc-error").removeClass("hidden"))},uploadCCFile:function(t){var e=this;if(i(t).find(".upload").val()){var a=i(t).find("[name=docType]").val(),c=parseInt(a,10),n=new FormData(t),s=this.getCCId();n.append("docId",s),c===r.CREDIT_CARD_FRONT&&n.append("comment","Front"),c===r.CREDIT_CARD_BACK&&n.append("comment","Back"),this.model.uploadDocument(a,n).then((function(t){c===r.CREDIT_CARD_FRONT&&(e.ccOptions[s].frontStatus=p),c===r.CREDIT_CARD_BACK&&(e.ccOptions[s].backStatus=p),e.updateCCStatuses()}))}},approveCC:function(){return!1},approveCC_mobile:function(){return!1}});c.exports=h}.call(e,a,e,t))||(t.exports=n)}).call(this,a(1),a(16))}}]);