webpackJsonp([35],{1983:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function l(e,t){var n=t.pathUrl,a=e.instruments.treePathsMap[n];return{localizationKey:a&&a._localizedNameKey,name:a&&a.category}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e,t){var n=e.ui,a=n.selectedInstrumentCategoryTreePath;return{selected:n.section===j.UI_SECTION_TRADING&&t.node._pathUrl===a}}function d(e){return{selectCategoryPath:W.a.throttle(function(t){e(Object(J.selectInstrumentCategoryTreePath)(t)),e(Object(J.selectFirstSymbolInSymbolList)(t)),e(Object(J.closeInstrumentDetails)()),e(Object(J.setTradingSection)())},10)}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function O(e){return{tree:e.instruments.tree}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function _(e){return{section:e.ui.section}}function E(e){return{openFavoritesSection:function(){e(Object(J.closeInstrumentDetails)()),e(Object(J.setFavoritesSection)())},openOpenPositionSection:function(){e(Object(J.closeInstrumentDetails)()),e(Object(J.setOpenPositionsSection)())},openOrdersSection:function(){e(Object(J.closeInstrumentDetails)()),e(Object(J.setOrdersSection)())}}}Object.defineProperty(t,"__esModule",{value:!0});var j=n(5),N=n(38),P=n(2374),k=n(1),w=n.n(k),S=n(11),C=n.n(S),I=n(6),U=n.n(I),T=n(75),x=n.n(T),D=n(3),R=n.n(D),z=n(17),A=n.n(z),F=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),M=function(){return U.a.getApplicationSettings()},K=function(e){function t(e){o(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={visible:x.a.size(),open:M().floatingOpenPositionsEnabled()},A()(n),n}return i(t,e),F(t,[{key:"componentDidMount",value:function(){M().on("change:floatingOpenPositionsEnabled",this.handle,this),x.a.on("remove update",this.handle,this)}},{key:"componentWillUnmount",value:function(){M().off("change:floatingOpenPositionsEnabled",this.handle,this),x.a.off("remove update",this.handle,this)}},{key:"handle",value:function(){this.setState({visible:x.a.size(),open:M().floatingOpenPositionsEnabled()})}},{key:"click",value:function(e){e.stopPropagation();var t=!M().floatingOpenPositionsEnabled();M().floatingOpenPositionsEnabled(t),R.a.trigger("ui:click:floating:open-positions",t)}},{key:"render",value:function(){var e=this.props,t=e.className,n=r(e,["className"]),o=this.state,c=o.open,i=o.visible,s=C()(a({"icon-open-floating-view":!c,"icon-close-floating-view":c},t,!!t));return i?w.a.createElement(n.as,{className:s,onClick:this.click}):null}}]),t}(w.a.Component);K.defaultProps={as:"span",className:""};var B=K,L=n(2375),G=n(2),J=n(27),V=n(0),W=n.n(V),q=n(25),H=n.n(q),Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},X=Object(G.connect)(l)(function(e){var t=(e.value,e.pathUrl,e.localizationKey),n=e.name,a=(e.dispatch,e.as),r=s(e,["value","pathUrl","localizationKey","name","dispatch","as"]);return w.a.createElement(a||"div",Q({},r),H.a.fixCategoryName(t,n))}),Y=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Z=function(e){function t(e){u(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.click=n.click.bind(n),n}return f(t,e),Y(t,[{key:"click",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.selectCategoryPath(this.props.node._pathUrl)}},{key:"render",value:function(){var e=C()({node:!0,tree_node_selected:this.props.selected});return w.a.createElement("div",{className:e,onMouseDown:this.click},w.a.createElement("div",{className:"name"},w.a.createElement("div",{className:"icon"}),w.a.createElement(X,{as:"div",className:"text",pathUrl:this.props.node._pathUrl})))}}]),t}(k.Component),$=Object(G.connect)(m,d)(Z),ee=n(312),te=n(71),ne=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),ae=function(e){return{categoriesOpenState:Object(te.getInstrumentTreeCategoriesOpenState)(e),selectedInstrumentCategoryTreePath:Object(te.getSelectedInstrumentCategoryTreePath)(e)}},re=function(e){return{setCategoryState:function(){e(J.setInstrumentTreeCategoryState.apply(void 0,arguments))}}},oe=function(e){function t(e){h(this,t);var n=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.click=n.click.bind(n),n}return b(t,e),ne(t,[{key:"componentDidMount",value:function(){this.checkShouldCategoryBeOpened(this.props)}},{key:"componentDidUpdate",value:function(){this.checkShouldCategoryBeOpened(this.props)}},{key:"checkShouldCategoryBeOpened",value:function(e){var t=e.node,n=e.selectedInstrumentCategoryTreePath,a=e.setCategoryState;!0!==e.categoriesOpenState[t._pathUrl]&&t._pathUrl&&this.checkIsCategoryActive(t._pathUrl,n)&&a(t._pathUrl,!0)}},{key:"checkIsCategoryActive",value:function(e,t){var n=String(t).toLowerCase(),a=String(e).toLowerCase();return-1!==n.indexOf(a)}},{key:"click",value:function(e){e.stopPropagation();var t=this.props,n=t.node,a=t.categoriesOpenState,r=t.selectedInstrumentCategoryTreePath;this.checkIsCategoryActive(n._pathUrl,r)||this.props.setCategoryState(n._pathUrl,!a[n._pathUrl])}},{key:"render",value:function(){var e=this.props,t=e.node,n=e.categoriesOpenState,a=!n[t._pathUrl];if(t.empty)return null;var r=C()({node:!0,folder:!0,closed:a});return w.a.createElement("div",{className:r},w.a.createElement("div",{className:"name",onClick:this.click},w.a.createElement("div",{className:"icon"},w.a.createElement("i",{className:"arrow"})),w.a.createElement(X,{as:"div",className:"text",pathUrl:t._pathUrl})),!a&&t.elements&&t.elements.length&&w.a.createElement("div",{className:"children"},W.a.map(t.elements,function(e){return Object(ee.g)(e)?null:Object(ee.f)(e)?w.a.createElement(ce,{key:e._pathUrl,node:e}):w.a.createElement($,{key:e._pathUrl,node:e})})))}}]),t}(k.Component),ce=Object(G.connect)(ae,re)(oe),ie=ce,se=function(e){var t=e.tree,n=W.a.map(t,function(e){return e.empty?null:Object(ee.f)(e)?w.a.createElement(ie,{key:e._pathUrl,node:e}):w.a.createElement($,{key:e._pathUrl,node:e})});return w.a.createElement("div",{className:"tree-container"},n)},le=Object(G.connect)(O)(se);n.d(t,"SelectedSectionState",function(){return pe}),n.d(t,"InstrumentTreeContainer",function(){return fe});var ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pe=Object(G.connect)(_)(function(e){var t,n=(e.dispatch,e.className),a=e.section,r=e.sectionName,o=e.children,c=g(e,["dispatch","className","section","sectionName","children"]),i=C()((t={},y(t,n,!!n),y(t,"tree_node_selected",a===r),t));return w.a.createElement(c.as||"div",ue({},c,{className:i}),o)}),fe=function(e){var t=e.openFavoritesSection,n=e.openOpenPositionSection,a=e.openOrdersSection;return w.a.createElement("div",{className:"pane pane__column pane__fluid"},w.a.createElement("div",{className:"tree-container menu"},w.a.createElement(pe,{as:"div",className:"node",sectionName:j.UI_SECTION_FAVORITES},w.a.createElement("div",{className:"name",id:"instruments-tree-favorites",onClick:t},w.a.createElement("div",{className:"icon"}),w.a.createElement("div",{className:"text"},__("tab.favorites")))),w.a.createElement(pe,{as:"div",className:"node",sectionName:j.UI_SECTION_OPEN_POSITION},w.a.createElement("div",{className:"name",id:"instruments-tree-open-positions",onClick:n},w.a.createElement("div",{className:"icon"}),w.a.createElement("div",{className:"text flex flex-valign-center"},__("tab.open_positions"),w.a.createElement("div",{className:"badge"},w.a.createElement(P.a,{as:"span"})),w.a.createElement(N.default,{desktop:!0},w.a.createElement(B,{as:"span"}))))),w.a.createElement(pe,{as:"div",className:"node",sectionName:j.UI_SECTION_ORDERS},w.a.createElement("div",{className:"name",id:"instruments-tree-orders",onClick:a},w.a.createElement("div",{className:"icon"}),w.a.createElement("div",{className:"text  flex flex-valign-center"},__("tab.orders"),w.a.createElement("div",{className:"badge"},w.a.createElement(L.a,{as:"span"})))))),w.a.createElement("div",{className:"instruments-tree"},w.a.createElement(le,null)))};t.default=Object(G.connect)(null,E)(fe)},2374:function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e){return{value:Object(o.getTotalPositionsCount)(e)}}var o=n(139),c=n(1),i=n.n(c),s=n(2),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(e){var t=e.value,n=e.as,r=(e.dispatch,a(e,["value","as","dispatch"]));return i.a.createElement(n||"span",l({},r),t)};t.a=Object(s.connect)(r)(u)},2375:function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e){return{value:Object(s.getTotalOrdersCount)(e)}}var o=n(1),c=n.n(o),i=n(2),s=n(140),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(e){var t=e.as,n=e.value,r=(e.dispatch,a(e,["as","value","dispatch"]));return c.a.createElement(t||"span",l({},r),n)};t.a=Object(i.connect)(r)(u)}});