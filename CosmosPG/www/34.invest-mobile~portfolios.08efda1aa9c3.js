(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{2125:function(e,t,n){"use strict";n.r(t),function(e){var r=n(2),o=n(0),a=n.n(o),c=n(12),i=n.n(c),u=n(4),l=n(43),s=n(14),f=n.n(s),p=n(7),h=n.n(p),d=n(1237),y=n(67),b=n(97),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var v=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return i()(t),t.state={loading:!0,ready:!1,shouldShowAccountInfoSwitcher:!1,shouldCreateAccount:!1,shouldOpenAccountCreation:!1,createAccountProps:{defaultTradingPlatform:r.ACCOUNT_TRADING_TYPE.QUANT_RANKS,defaultCurrency:e.userCurrency}},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),m(n,[{key:"componentDidMount",value:function(){f.a.isTradingToolEnabled(r.TRADING_TOOLS.PORTFOLIO)?this.serviceEnabled():this.serviceDisabled()}},{key:"isQuantRanksAccountCreated",value:function(){return e.findWhere(this.props.allAccounts,{tradingAccountInstrumentType:r.ACCOUNT_TRADING_TYPE.QUANT_RANKS})}},{key:"serviceEnabled",value:function(){if(this.props.userInstrumentType===r.ACCOUNT_TRADING_TYPE.QUANT_RANKS)return this.navigateToPortfolio();this.setState({loading:!1,ready:!0}),this.isQuantRanksAccountCreated()?this.setState({shouldShowAccountInfoSwitcher:!0}):this.setState({shouldCreateAccount:!0})}},{key:"serviceDisabled",value:function(){h.a.navigate("/")}},{key:"createAccount",value:function(){this.setState({shouldOpenAccountCreation:!0})}},{key:"onSuccess",value:function(){}},{key:"navigateToPortfolio",value:function(t){var n=e.findWhere(t||this.props.allAccounts,{tradingAccountInstrumentType:r.ACCOUNT_TRADING_TYPE.QUANT_RANKS,tradingAccountType:f.a.getPlatformTypeId()});if(n){var o=n.platformAccountId,a=f.a.getPlatformType().toLowerCase();h.a.trigger("platform:switch:account",a,o)}}},{key:"onCreateAccount",value:function(e){this.navigateToPortfolio(e)}},{key:"onCloseCreateAccount",value:function(){this.setState({shouldOpenAccountCreation:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,o=t.ready,c=t.shouldOpenAccountCreation,i=t.shouldShowAccountInfoSwitcher,l=t.shouldCreateAccount,s=t.createAccountProps;return n||!o?a.a.createElement(y.a,null):a.a.createElement("div",null,i&&a.a.createElement("div",null,a.a.createElement("button",{className:"btn btn-primary btn-action",onClick:function(){return e.navigateToPortfolio()}},__("invest.open.account"))),l&&a.a.createElement("button",{className:"btn btn-primary btn-action",onClick:this.createAccount},__("invest.build.portfolio")),c&&a.a.createElement(u.Provider,{store:window.store},a.a.createElement(b.b,null,a.a.createElement(d.default,{selectedTab:r.CREATE_ACCOUNT_TAB,onClose:this.onCloseCreateAccount,onCreateAccount:this.onCreateAccount,createAccountProps:s}))))}}]),n}(a.a.Component);t.default=Object(u.connect)((function(e){return{userInstrumentType:Object(l.getUserInstrumentType)(e),allAccounts:Object(l.getUserTradingAccounts)(e),userCurrency:Object(l.getUserCurrency)(e)}}))(v)}.call(this,n(1))},2293:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var r="quant_architect",o="dma_exchange"},2464:function(e,t,n){},2571:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(1),c=n.n(a),i=n(4),u=n(15),l=n(81),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"render",value:function(){var e=this.props.service;return o.a.createElement("div",null,o.a.createElement(l.default,{name:e,width:65,height:62}),o.a.createElement("div",{className:"text-primary text-uppercase service-title"},__("invest."+e)))}}]),t}(r.PureComponent),p=n(2293),h=n(2125),d=n(63),y=n.n(d),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),b(t,[{key:"render",value:function(){var e=this.props.service;return o.a.createElement("div",{className:"service-description"},o.a.createElement("div",{className:"text-block"},o.a.createElement("div",null,y()(__("invest."+e+".description")))),e===p.b&&o.a.createElement(h.default,null),e===p.a&&o.a.createElement("a",{href:"#",className:"btn btn-primary btn-action disabled"},__("coming_soon")))}}]),t}(r.PureComponent),v=n(2),_=n(67),O=n(257),E=n(641),P=n(12),w=n.n(P),C=n(187),T=(n(587),n(912),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var g=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={shouldRunPerformanceLoader:!0,statusOfPerformanceLoader:v.EMPTY,portfolio:{}},w()(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),T(t,[{key:"onPerformanceLoaderSuccess",value:function(e){this.setState({loadedPerformance:e,shouldRunPerformanceLoader:!1,statusOfPerformanceLoader:v.SUCCESS})}},{key:"onPerformanceLoaderError",value:function(){this.setState({shouldRunPerformanceLoader:!1,statusOfPerformanceLoader:v.ERROR})}},{key:"componentWillMount",value:function(){c.a.size(this.props.portfolios)>=1&&this.setState({portfolio:this.props.portfolios[0]})}},{key:"onChangePortfolio",value:function(e){this.setState({portfolio:e,shouldRunPerformanceLoader:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.shouldRunPerformanceLoader,r=t.statusOfPerformanceLoader,a=t.loadedPerformance,i=t.portfolio,u=this.props,l=u.portfolios,s=u.onErrorCancel,f=u.onErrorClose,p=u.universeTypes,d=a||{},y=d.backtestRequest,b=d.backtestPerformance,m=y&&c.a.findWhere(p,{value:y.universeTypeID});return o.a.createElement("div",{className:"pane pane__column quant-architect-portfolio"},o.a.createElement(C.default,{getOptionLabel:function(e){return e.portfolioName},getOptionValue:function(e){return e.portfolioID},onChange:function(t){return e.onChangePortfolio(t)},options:l,defaultValue:i}),n&&o.a.createElement(_.a,{position:"absolute",fit:!0}),n&&o.a.createElement(E.a,{portfolioProviderId:i.portfolioProviderId,onSuccess:this.onPerformanceLoaderSuccess,onErro:this.onPerformanceLoaderError,onErrorClose:f,onErrorCancel:s}),o.a.createElement("div",{className:"portfolio__wrapper"},r===v.SUCCESS&&o.a.createElement("div",{className:"pane pane__fluid pane__column portfolio__performance"},o.a.createElement("div",{className:"pane pane__fluid pane__row portfolio__performance-row"},o.a.createElement("div",{className:"pane pane__fluid portfolio__performance-row-item"},o.a.createElement(O.a,{compact:!0,invest:!0,universeName:m&&__(m.label),dailyReturnData:b&&b.dailyReturnData,yearlyPerformanceData:b&&b.yearlyPerformanceData}))))),o.a.createElement(h.default,null))}}]),t}(r.PureComponent),A=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),A(t,[{key:"render",value:function(){var e=this.props,t=e.portfolios,n=e.service,r=n===p.b&&c.a.size(t)>0;return o.a.createElement(o.a.Fragment,null,o.a.createElement(f,{service:n}),r?o.a.createElement(g,{portfolios:t}):o.a.createElement(m,{service:n}))}}]),t}(r.PureComponent);t.a=Object(i.connect)((function(e){return{portfolios:Object(u.N)(e)}}))(j)}}]);