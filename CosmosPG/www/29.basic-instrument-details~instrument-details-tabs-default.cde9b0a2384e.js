(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{2214:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),r=n(12),i=n.n(r),l=n(1),o=n.n(l),c=n(342),u=n.n(c),m=n(2349),d=n.n(m),p=n(10),h=n.n(p),f=n(34),v=n.n(f),b=n(2350),y=n(2351),g=n(67),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();var N=function(e){var t=e.className,n=e.style,s=e.onClick;return a.a.createElement("div",{className:t,style:n,onClick:s},a.a.createElement("div",null))},k=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={instruments:[],sortedMatchedBlends:[]},n._isMounted=!1,i()(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),E(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,"symbols"in this.props?o.a.isArray(this.props.symbols)&&!o.a.isEmpty(this.props.symbols)?this.setInstruments(this.symbolsToInstruments(this.props.symbols)):this.setInstruments(this.getPopularInstruments()):this.loadInstruments(),this.findMatchedBlends(this.props.model.getName(),y.a)}},{key:"findMatchedBlends",value:function(e,t){var n=[];t.forEach((function(t){t.getBasket().instruments.forEach((function(s){var a,r;(a=s.displayName.toLowerCase(),r=e.toLowerCase(),a&&(a.indexOf(r)>=0||a.replace("/","").indexOf(r)>=0))&&(t.searchedInstrumentWeight=s.instrumentWeight,n.push(t))}))}));var s=o.a.sortBy(n,"searchedInstrumentWeight").reverse();this.setState({sortedMatchedBlends:s})}},{key:"loadInstruments",value:function(){var e=this;this.props.model&&this.props.model.getSymbol()?(this.setState({loading:!0}),h.a.loadRelatedInstruments(this.props.model.getSymbol()).then((function(t){if(e._isMounted)if(e.setState({loading:!1}),0===t.length)e.setInstruments(e.getPopularInstruments());else{var n=e.symbolsToInstruments(t);e.setInstruments(0!==n.length?n:e.getPopularInstruments())}})).catch((function(){e._isMounted&&(e.setState({loading:!1}),e.setInstruments(e.getPopularInstruments()))}))):this.setInstruments(this.getPopularInstruments())}},{key:"setInstruments",value:function(e){if(this.props.slidesEnabled){var t=this.props.slidesSize.split("x");e=function(e,t,n){var s=[],a=void 0,r=void 0,i=void 0,l=void 0;for(a=0,r=-1,i=0,l=0;a<e.length;a++){var o=a%(t*n);0===o&&(s[++r]=[[]]),i=o/t|0,0===(l=o%t)&&(s[r][i]=[]),s[r][i][l]=e[a]}return s}(e,t[0],t[1])}this._isMounted&&this.setState({instruments:e})}},{key:"getPopularInstruments",value:function(){return v.a.getInstrumentsByCategory(v.a.getPopularCategory())}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"symbolsToInstruments",value:function(e){return o.a.compact(o.a.map(e,(function(e){var t=v.a.getInstrumentBySymbol(e,!0);if(t&&t.isVisible())return t})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.model,s=t.slidesEnabled;return this.state.loading?a.a.createElement(g.a,null):a.a.createElement("div",null,a.a.createElement("div",{className:"related-instruments-container"},a.a.createElement("div",{className:"related-instruments-title"},__("instrument_info.related_instruments.title",n.getDisplayName())),a.a.createElement("div",{className:"related-instruments-wrapper"},s?a.a.createElement("div",{className:"related-instruments with-slider"},a.a.createElement(u.a,{dots:!1,autoplaySpeed:5e3,nextArrow:a.a.createElement(N,null),prevArrow:a.a.createElement(N,null)},this.state.instruments.map((function(e,t){return a.a.createElement("div",{className:"related-instruments-slide",key:"related-instruments-slide-"+t},e.map((function(e,n){return a.a.createElement("div",{className:"related-instruments-row",key:"related-instruments-row-"+t+"-"+n},e.map((function(e){return a.a.createElement(d.a,{key:"related-instrument-"+e.getSymbol(),model:e})})))})))})))):a.a.createElement("div",{className:"related-instruments without-slider"},this.state.instruments.map((function(e){return a.a.createElement(d.a,{key:"related-instrument-"+e.getSymbol(),model:e})}))))),a.a.createElement(b.a,{matchedBlends:this.state.sortedMatchedBlends},a.a.createElement("div",{className:"related-instruments-container"},a.a.createElement("div",{className:"related-instruments-title"},__("blend.blends.include",this.props.model.getDisplayName())),a.a.createElement("div",{className:"related-instruments-wrapper"},a.a.createElement("div",{className:"related-instruments without-slider"},this.state.sortedMatchedBlends.map((function(t){return a.a.createElement(d.a,{key:"related-instrument-"+t.getSymbol(),model:t,percentages:t.searchedInstrumentWeight,instrumentName:e.props.model.getName()})})))))))}}]),t}(a.a.PureComponent);k.defaultProps={slidesEnabled:!1,slidesSize:"2x2"},t.default=k},2235:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),r=n(4);t.default=Object(r.connect)((function(e,t){var n=t.symbol,s=t.as,a=void 0===s?"span":s,r=e.orders.instrumentOrdersCounter[n];return{available:r&&r._count>0,as:a}}))((function(e){var t=e.invert,n=e.available,s=e.children,r=(e.symbol,e.dispatch,function(e,t){var n={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n}(e,["invert","available","children","symbol","dispatch"]));return t&&!n||!t&&n?null!==r.as?a.a.createElement(r.as,r,s):s:null}))},2237:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),r=n(4);t.default=Object(r.connect)((function(e,t){var n=t.symbol,s=t.as,a=void 0===s?"span":s,r=e.positions.instrumentPositionsCounter[n];return{available:r&&r._count>0,as:a}}))((function(e){var t=e.invert,n=e.available,s=e.children,r=(e.symbol,e.dispatch,function(e,t){var n={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n}(e,["invert","available","children","symbol","dispatch"]));return t&&!n||!t&&n?null!==r.as?a.a.createElement(r.as,r,s):s:null}))},2238:function(e,t,n){(function(s){var a;void 0===(a=function(e,t,s){var a=n(0),r=n(20),i=n(7),l=n(34),o=n(1),c="change:sellTradable change:buyTradable change:outOfMarketHours change:isMarginLevelLow change:closable",u=function(e){var t=l.getInstrumentBySymbol(e);return t&&t.status.isClosable()};s.exports=r({displayName:"exports",getDefaultProps:function(){return{symbol:"",className:"",text:__("actions.close_all"),prevent:!1}},getInitialState:function(){return{disabled:!u(this.props.symbol)}},click:function(e){var t=this.props,n=t.prevent,s=t.symbol;n&&(e.preventDefault(),e.stopPropagation()),i.trigger("instrument:positions:close_all",s)},componentDidMount:function(){this.createListener(this.props.symbol)},componentWillUnmount:function(){this.removeListener(this.props.symbol)},createListener:function(e){var t=l.getInstrumentBySymbol(e);t&&t.on(c,this.update,this)},removeListener:function(e){var t=l.getInstrumentBySymbol(e);t&&t.off(c,this.update,this)},componentWillUpdate:function(e){e.symbol!==this.props.symbol&&(this.removeListener(this.props.symbol),this.createListener(e.symbol))},update:function(){l.getInstrumentBySymbol(this.props.symbol)&&this.setState({disabled:!u(this.props.symbol)})},shouldComponentUpdate:function(e,t){return!(o.isEqual(e,this.props)||o.isEqual(t,this.state))},render:function(){var e=this.state.disabled;return a.createElement("button",{className:"btn "+this.props.className,disabled:e,onClick:this.click},a.createElement("span",null,this.props.text))}})}.call(t,n,t,e))||(e.exports=a)}).call(this,n(1))},2239:function(e,t,n){(function(s){var a;void 0===(a=function(e,t,a){var r=n(0),i=n(20),l=n(7),o=n(34),c="change:sellTradable change:buyTradable change:outOfMarketHours change:isMarginLevelLow change:cancelable";a.exports=i({displayName:"exports",getDefaultProps:function(){return{symbol:"",className:"",text:__("actions.cancel_all"),prevent:!1}},getInitialState:function(){return{disabled:(e=this.props.symbol,t=o.getInstrumentBySymbol(e),!(t&&t.status.isCancelable()))};var e,t},click:function(e){var t=this.props,n=t.prevent,s=t.symbol;n&&(e.preventDefault(),e.stopPropagation()),l.trigger("instrument:orders:cancel_all",s)},componentDidMount:function(){this.createListener(this.props.symbol)},componentWillUnmount:function(){this.removeListener(this.props.symbol)},createListener:function(e){var t=o.getInstrumentBySymbol(e);t&&t.on(c,this.update,this)},removeListener:function(e){var t=o.getInstrumentBySymbol(e);t&&t.off(c,this.update,this)},componentWillUpdate:function(e){e.symbol!==this.props.symbol&&(this.removeListener(this.props.symbol),this.createListener(e.symbol))},update:function(){var e=o.getInstrumentBySymbol(this.props.symbol);e&&this.setState({disabled:!e.status.isClosable()})},shouldComponentUpdate:function(e,t){return!(s.isEqual(e,this.props)||s.isEqual(t,this.state))},render:function(){var e=this.state.disabled;return r.createElement("button",{className:"btn "+this.props.className,disabled:e,onClick:this.click},r.createElement("span",null,this.props.text))}})}.call(t,n,t,e))||(e.exports=a)}).call(this,n(1))},2349:function(e,t,n){var s;void 0===(s=function(e,t,s){var a=n(0),r=(n(1),n(7)),i=n(82),l=n(568),o=n(20),c=n(71).transformSBSymbolToSymbol,u=function(e){!0!==e.bid&&(e.bid=i.divideValueByPipSize(e.bid,e.pipsPrecision));var t=!0===e.bid?e.bid:i.formatValueToStringOrComponent(e.bid,!1);return a.createElement("div",{className:e.className},t)},m=function(e){!0!==e.ask&&(e.ask=i.divideValueByPipSize(e.ask,e.pipsPrecision));var t=!0===e.ask?e.ask:i.formatValueToStringOrComponent(e.ask,!1);return a.createElement("div",{className:e.className},t)},d=o({displayName:"RelatedInstrument",onClick:function(e){var t=this;setTimeout((function(){return r.trigger("ui:instrument",t.props.model.get("instrumentSymbol"),!0)}),0)},render:function(){var e=this.props.model.getSymbol();if(!e||"string"!=typeof e)return null;var t=c(e).replace("/","").toLowerCase();return a.createElement("div",{className:"related-instrument",onClick:this.onClick},a.createElement("div",{className:"related-instrument-img"},a.createElement("div",{className:"instrument-img instrument-img-"+t})),a.createElement("div",{className:"related-instrument-name"},this.props.model.getDisplayName()),a.createElement("div",{className:"related-instrument-price-change"},a.createElement("div",{className:"rate"},a.createElement(l.Ask,{symbol:e,render:m})),a.createElement("div",{className:"change"},a.createElement(l.Change,{symbol:e}))),this.props.percentages&&a.createElement("div",{className:"blends-percentages"},__("blend.blends.percentages",this.props.instrumentName,this.props.percentages)),a.createElement("div",{className:"related-instrument-sell-buy"},a.createElement("div",{className:"related-instrument-sell"},a.createElement("div",{className:"action"},__("actions.sell")),a.createElement("div",{className:"rate"},a.createElement(l.Bid,{symbol:e,render:u}))),a.createElement("div",{className:"related-instrument-buy"},a.createElement("div",{className:"action"},__("actions.buy")),a.createElement("div",{className:"rate"},a.createElement(l.Ask,{symbol:e,render:m}))),a.createElement("div",{className:"related-instrument-spread"},a.createElement("div",{className:"spread"},a.createElement(l.RateDirection,{symbol:e},(function(e){return a.createElement("div",null,a.createElement("i",{className:e.className}))})),a.createElement(l.Spread,{as:"div",symbol:e})))))}});s.exports=d}.call(t,n,t,e))||(e.exports=s)},2350:function(e,t,n){"use strict";(function(e){n(0);t.a=function(t){var n=t.matchedBlends,s=t.children;return e.isEmpty(n)?null:s}}).call(this,n(1))},2351:function(e,t,n){"use strict";(function(e){var s=n(205),a={},r=[];n.n(s).a.filterInstruments((function(t){if(!t.isVisible())return!1;var n=t.getName();if(e.has(a,n))return!1;var s=function(e){var t=[e.getName()||""],n=e.getBasket()?e.getBasket().instruments:"";if(n){var s=n.map((function(e){return e.displayName}));t.push({blendsInstruments:s})}return t}(t),i=e.last(s);e.isObject(i)&&r.push(t),a[n]=!0})),t.a=r}).call(this,n(1))}}]);