webpackJsonp([39],{1931:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),s=n(821),c=n(55),i=n(159),m=n(816),u=n(817),d=n(1),h=n.n(d),b=n(279),p=n(286),y=n(287),f=n(285),E=n(283),v=n(284),_=n(444),w=n(419),g=n(824),N=n(281),S=n(215),O=n(881),T=n(217),k=n(859),C=n(882),P=n(214),R=n(280),j=n(292),I=n(293),x=n(20),W=n.n(x),D=n(2545),B=n(440),U=n(0),H=n.n(U),L=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),M=function(e){function t(e){a(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.List=null,W()(n),n}return r(t,e),L(t,[{key:"componentWillReceiveProps",value:function(e){this.needToRecomputeHeight=this._isPropsWillChange(["symbol"],e)}},{key:"_isPropsWillChange",value:function(e,t){var n=this;return!H.a.isEmpty(e)&&!H.a.isEmpty(t)&&H.a.some(e,function(e){return n.props[e]!==t[e]})}},{key:"onResize",value:function(e,t,n,a){(this.needToRecomputeHeight||e&&e.getChachedHeight(t)!==a)&&e.recomputeRowHeights(t,a)}},{key:"_rowRenderer",value:function(e){var t=this,n=e.symbol,a=e.style,l=e.measurer,r=e.index;return h.a.createElement("div",{style:a},h.a.createElement("div",null,h.a.createElement(B.a,{handleHeight:!0,onResize:this.onResize.bind(this,l,r)}),h.a.createElement(I.a,{as:"div",className:"row",symbol:n,onClick:function(e){return t.selectInstrument(e,n)}},h.a.createElement(c.default,{tablet:!0,mobile:!0},h.a.createElement("td",{className:"cell-instrument-name-with-change instrument-name-with-change"},h.a.createElement(P.a,{symbol:n,className:"instrument-name-cell"}),h.a.createElement(j.a,{symbol:n,as:"div",className:"change flex flex-start"},h.a.createElement(R.a,{symbol:n})))),h.a.createElement(c.default,{desktop:!0},h.a.createElement("td",{className:"cell-instrument-name instrument-name"},h.a.createElement(P.a,{symbol:n,className:"instrument-name-cell"}))),h.a.createElement("td",{className:"rate-with-button  cell-rate-with-button"},h.a.createElement("div",null,h.a.createElement("div",{className:"rate"},h.a.createElement(E.a,{as:"div",symbol:n,className:"change"},h.a.createElement(f.a,{as:"span",symbol:n}))),h.a.createElement("div",{className:"button"},h.a.createElement(v.a,{onClick:function(e){return t.sell(e,n)},as:"button",symbol:n,className:"btn btn-sell btn-primary btn-xs"},__("actions.sell"))))),h.a.createElement("td",{className:"rate-with-button cell-rate-with-button"},h.a.createElement("div",null,h.a.createElement("div",{className:"rate"},h.a.createElement(p.a,{as:"div",symbol:n,className:"change"},h.a.createElement(b.a,{as:"span",symbol:n}))),h.a.createElement("div",{className:"button"},h.a.createElement(y.a,{onClick:function(e){return t.buy(e,n)},as:"button",symbol:n,className:"btn btn-buy btn-primary btn-xs"},__("actions.buy"))))),h.a.createElement(c.default,{minWidth:1050},h.a.createElement("td",{className:"cell-change"},h.a.createElement(j.a,{symbol:n,className:"change"},h.a.createElement(R.a,{symbol:n})))),h.a.createElement(c.default,{minWidth:1605},h.a.createElement("td",{className:"cell-range"},h.a.createElement(O.a,{symbol:n,as:"div"}))),h.a.createElement(c.default,{minWidth:885},h.a.createElement("td",{className:"sentiment-block"},h.a.createElement(C.a,{as:"div",symbol:n,"data-tooltip-align":"right","aria-label":__("sentiment.text")}))),h.a.createElement(c.default,{minWidth:1450},h.a.createElement("td",{className:"instrument-mini-chart"},h.a.createElement("div",{className:"instrument-mini-chart-cell"},h.a.createElement(k.a,{symbol:n,width:75})))),h.a.createElement("td",{className:"cell-actions actions"},h.a.createElement("div",{className:"actions"},h.a.createElement("div",{className:"btn btn-icon",onClick:function(e){return t.toggleFavorite(e,n)}},h.a.createElement(N.a,{symbol:n,as:"div",className:"",yes:"icon-star-filled",no:"icon-star"})),h.a.createElement(m.a,{as:"div",className:"btn btn-icon",onClick:function(e){return t.openPriceAlerts(e,n)}},h.a.createElement(u.a,{symbol:n,as:"div",className:"",yes:"icon-bell-filled",no:"icon-bell"})),h.a.createElement("div",{className:"btn btn-icon"},h.a.createElement("div",{className:"icon-instrument-info",onClick:function(e){return t.openInstrumentDetails(e,n)}}))))),h.a.createElement(T.a,{symbol:n,as:"div",className:"row-expand"},h.a.createElement(g.default,{as:"td",colSpan:5,symbol:n,editPosition:this.editPosition,closePosition:this.closePosition,selectInstrument:this.selectInstrument}),h.a.createElement(w.default,{as:"td",colSpan:5,symbol:n,editOrder:this.editOrder,cancelOrder:this.cancelOrder,selectInstrument:this.selectInstrument}))))}},{key:"render",value:function(){var e=this.props,t=e.symbolsSortName,n=e.symbols,a=e.path;return h.a.createElement("div",{className:"instruments-table trading-tab "},h.a.createElement("table",null,h.a.createElement("thead",{className:"columns"},h.a.createElement("tr",null,h.a.createElement(s.a,{as:"th",active:t===o.INSTRUMENT_SORT.NAME,onSort:this.sortByName,className:"column column-instrument-name column-sortable"},__("table.header.symbol")),h.a.createElement("th",{className:"column column-rate-with-button"},h.a.createElement("div",null,h.a.createElement("div",null,__("actions.sell")))),h.a.createElement("th",{className:"column column-rate-with-button"},h.a.createElement("div",null,h.a.createElement("div",null,__("actions.buy")))),h.a.createElement(c.default,{minWidth:1050},h.a.createElement("th",{className:"column column-change"},h.a.createElement("div",null,h.a.createElement("div",null,__("actions.change"))))),h.a.createElement(c.default,{minWidth:1605},h.a.createElement("th",{className:"column column-range"},__("range"))),h.a.createElement(c.default,{minWidth:885},h.a.createElement(s.a,{as:"th",active:t===o.INSTRUMENT_SORT.SENTIMENT,onSort:this.sortBySentiments,className:"column column-sentiment column-sortable"},__("sentiment.title"))),h.a.createElement(c.default,{minWidth:1450},h.a.createElement("th",{className:"column column-mini-chart"},__("table.header.mini-chart"))),h.a.createElement("th",{className:"column"}))),h.a.createElement("tbody",{className:"rows pane pane__fluid"},h.a.createElement(D.a,{path:a,symbols:n,renderer:this._rowRenderer}))))}}]),t}(S.a);t.default=Object(_.a)(Object(i.a)(M))},2545:function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{totalPositionsCount:e.positions.totalPositionsCount,totalOrdersCount:e.orders.totalOrdersCount,selectedSymbol:e.ui.selectedInstrumentCategorySymbol,categoryTreePath:Object(f.getSelectedInstrumentCategoryTreePath)(e),section:Object(f.getUiSection)(e),shouldInstrumentBeCentered:e.ui.shouldInstrumentBeCentered,symbolsSortName:Object(f.getSymbolsSortName)(e),symbolsSortDirection:Object(f.getSymbolsSortDirection)(e)}}function c(e){return{updateShouldInstrumentBeCentered:function(t){e(Object(_.setShouldInstrumentBeCentered)(t))}}}var i=n(1),m=n.n(i),u=n(0),d=n.n(u),h=n(20),b=n.n(h),p=n(3),y=n(294),f=n(88),E=n(53),v=n(834),_=(n.n(v),n(29)),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),N=10,S=function(e){function t(e){l(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.attempts=N,n.state={scrollTop:0,scrollLeft:0},n.scrollTop=0,n.delay=null,b()(n),n._scrollbar=m.a.createRef(),n._list=null,n.measurer=Object(E.c)(n,{CellMeasurerCache:y.c}),n}return o(t,e),g(t,[{key:"componentWillUnmount",value:function(){this.measurer()}},{key:"componentDidMount",value:function(){this._scrollToRow(this.props)}},{key:"componentWillUpdate",value:function(){this.measurer.resizeAll(!1)}},{key:"componentDidUpdate",value:function(e){e.shouldInstrumentBeCentered&&this._scrollToRow(e),e.symbols!==this.props.symbols&&this._scrollToRow(this.props)}},{key:"handleScroll",value:function(e){var t=e.target,n=t.scrollTop,a=t.scrollLeft;this.setState({scrollTop:n,scrollLeft:a})}},{key:"handleUpdate",value:function(){this.props.shouldInstrumentBeCentered&&this.updateScrollbar()}},{key:"_scrollToRow",value:function(e){var t=this,n=this._getSymbolIndexFromProps(e);d.a.delay(function(){return t._list&&t._list.scrollToRow(-1===n?0:n)},0)}},{key:"_getSymbolIndexFromProps",value:function(e){return d.a.indexOf(e.symbols,e.selectedSymbol)}},{key:"_rowRenderer",value:function(e){var t=this.props,n=t.renderer,a=t.symbols,l=e.index,r=e.key,o=e.parent,s=a[l];return m.a.createElement(y.b,{cache:this._cache,columnIndex:0,key:r,parent:o,rowIndex:l},n(w({},e,{symbol:s,measurer:this.measurer})))}},{key:"clearDelay",value:function(){this.delay&&(clearTimeout(this.delay),this.delay=null)}},{key:"updateScrollbar",value:function(){var e=this;this.clearDelay(),this.props.updateShouldInstrumentBeCentered(!1),this.attempts--,this.attempts>0?this.delay=d.a.delay(function(){e._scrollbar.current&&e._scrollbar.current.getScrollTop()!==e.scrollTop?(e._scrollbar.current.scrollTop(e.scrollTop),e.clearDelay(),e.attempts=N):(e.clearDelay(),e.updateScrollbar())},10):(this.clearDelay(),this.attempts=N)}},{key:"onListScroll",value:function(e){var t=e.scrollTop;t!==this.scrollTop&&(this.scrollTop=t,this.updateScrollbar())}},{key:"render",value:function(){var e=this,t=this.props,n=t.path,l=t.symbols,r=t.renderer,o=t.totalPositionsCount,s=t.totalOrdersCount,c=t.symbolsSortName,i=t.symbolsSortDirection;if(!d.a.isFunction(r))return null;var u="list-"+n+"-"+o+"-"+s+"-"+c+"-"+i,h={overflowX:!1,overflowY:!1};return m.a.createElement(y.a,null,function(t){var n=t.height,r=t.width;return m.a.createElement(v.Scrollbars,{autoHide:!0,ref:e._scrollbar,style:{width:r,height:n},renderTrackVertical:function(e){var t=e.style,n=a(e,["style"]);return m.a.createElement("div",w({},n,{style:w({},t,{width:"8px",top:"0px",bottom:"0px",right:"1px",borderRadius:0})}))},renderThumbVertical:function(e){var t=e.style,n=a(e,["style"]);return m.a.createElement("div",w({},n,{style:w({},t),className:"custom-scrolling-vertical-thumb"}))},renderView:function(e){var t=e.style,n=a(e,["style"]);return m.a.createElement("div",w({},n,{style:w({},t,{overflowX:"hidden",marginBottom:0})}))},onScroll:e.handleScroll,onUpdate:e.handleUpdate},m.a.createElement(y.d,{ref:function(t){e._list=t},style:h,key:u,height:n,"aria-label":"",rowCount:d.a.size(l),overscanRowCount:10,width:r,deferredMeasurementCache:e._cache,rowHeight:e._cache.rowHeight,rowRenderer:e._rowRenderer,scrollToAlignment:"center",scrollTop:e.state.scrollTop,scrollLeft:e.state.scrollLeft,onScroll:e.onListScroll}))})}}]),t}(m.a.Component);S.defaultProps={symbols:[],shouldShowPositions:!0,shouldShowOrders:!0,renderer:d.a.noop},t.a=Object(p.connect)(s,c)(S)}});